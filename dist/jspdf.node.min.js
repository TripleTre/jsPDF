/** @license
 *
 * jsPDF - PDF Document creation from JavaScript
 * Version 2.5.1 Built on 2022-09-21T05:46:24.223Z
 *                      CommitID 00000000
 *
 * Copyright (c) 2010-2021 James Hall <james@parall.ax>, https://github.com/MrRio/jsPDF
 *               2015-2021 yWorks GmbH, http://www.yworks.com
 *               2015-2021 Lukas Holländer <lukas.hollaender@yworks.com>, https://github.com/HackbrettXXX
 *               2016-2018 Aras Abbasi <aras.abbasi@gmail.com>
 *               2010 Aaron Spike, https://github.com/acspike
 *               2012 Willow Systems Corporation, https://github.com/willowsystems
 *               2012 Pablo Hess, https://github.com/pablohess
 *               2012 Florian Jenett, https://github.com/fjenett
 *               2013 Warren Weckesser, https://github.com/warrenweckesser
 *               2013 Youssef Beddad, https://github.com/lifof
 *               2013 Lee Driscoll, https://github.com/lsdriscoll
 *               2013 Stefan Slonevskiy, https://github.com/stefslon
 *               2013 Jeremy Morel, https://github.com/jmorel
 *               2013 Christoph Hartmann, https://github.com/chris-rock
 *               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
 *               2014 James Makes, https://github.com/dollaruw
 *               2014 Diego Casorran, https://github.com/diegocr
 *               2014 Steven Spungin, https://github.com/Flamenco
 *               2014 Kenneth Glassey, https://github.com/Gavvers
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * Contributor(s):
 *    siefkenj, ahwolf, rickygu, Midnith, saintclair, eaparango,
 *    kim3er, mfo, alnorth, Flamenco
 */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,e,r=require("fflate"),a=function(){return"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this}();function n(){a.console&&"function"==typeof a.console.log&&a.console.log.apply(a.console,arguments)}t=require("atob"),e=require("btoa");var i={log:n,warn:function(t){a.console&&("function"==typeof a.console.warn?a.console.warn.apply(a.console,arguments):n.call(null,arguments))},error:function(t){a.console&&("function"==typeof a.console.error?a.console.error.apply(a.console,arguments):n(t))}};function o(t){if("object"!=typeof t)throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,a){if(a=a||!1,"string"!=typeof t||"function"!=typeof r||"boolean"!=typeof a)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var n=Math.random().toString(35);return e[t][n]=[r,!!a],n},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],0===Object.keys(e[r]).length&&delete e[r],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),o=[];for(var s in e[r]){var c=e[r][s];try{c[0].apply(t,n)}catch(t){a.console&&i.error("jsPDF PubSub Error",t.message,t)}c[1]&&o.push(s)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function s(t){var r,n="string"==typeof arguments[0]?arguments[0]:"p",c=arguments[1],u=arguments[2],l=arguments[3],h=[],d=1,f=16;"object"==typeof(t=t||{})&&(n=t.orientation,c=t.unit||c,u=t.format||u,l=t.compress||t.compressPdf||l,d="number"==typeof t.userUnit?Math.abs(t.userUnit):1,void 0!==t.precision&&(r=t.precision),void 0!==t.floatPrecision&&(f=t.floatPrecision)),h=t.filters||(!0===l?["FlateEncode"]:h),c=c||"mm",n=(""+(n||"P")).toLowerCase();var p={internal:{},__private__:{}};p.__private__.PubSub=o;var g="1.3",_=p.__private__.getPdfVersion=function(){return g};p.__private__.setPdfVersion=function(t){g=t},u=u||"a4";var m={COMPAT:"compat",ADVANCED:"advanced"},v=m.COMPAT;p.isAdvancedAPI=function(){return v===m.ADVANCED};var y,b=p.roundToPrecision=p.__private__.roundToPrecision=function(t,e){var a=r||e;if(isNaN(t)||isNaN(a))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return t.toFixed(a).replace(/0+$/,"")},w=p.hpf=p.__private__.hpf=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return b(t,f)},D=p.scale=p.__private__.scale=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.scale");return t*W},I="00000000000000000000000000000000",A=p.__private__.getFileId=function(){return I},P=p.__private__.setFileId=function(t){return I=void 0!==t&&/^[a-fA-F0-9]{32}$/.test(t)?t.toUpperCase():I.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join("")};p.setFileId=function(t){return P(t),this},p.getFileId=function(){return A()};var C=p.__private__.convertDateToPDFDate=function(t){var e=t.getTimezoneOffset(),r=e<0?"+":"-",a=Math.floor(Math.abs(e/60)),n=Math.abs(e%60),i=[r,F(a),"'",F(n),"'"].join("");return["D:",t.getFullYear(),F(t.getMonth()+1),F(t.getDate()),F(t.getHours()),F(t.getMinutes()),F(t.getSeconds()),i].join("")},x=p.__private__.convertPDFDateToDate=function(t){var e=parseInt(t.substr(2,4),10),r=parseInt(t.substr(6,2),10)-1,a=parseInt(t.substr(8,2),10),n=parseInt(t.substr(10,2),10),i=parseInt(t.substr(12,2),10),o=parseInt(t.substr(14,2),10);return new Date(e,r,a,n,i,o,0)},B=p.__private__.setCreationDate=function(t){var e;if(void 0===t&&(t=new Date),t instanceof Date)e=C(t);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(t))throw new Error("Invalid argument passed to jsPDF.setCreationDate");e=t}return y=e},E=p.__private__.getCreationDate=function(t){var e=y;return"jsDate"===t&&(e=x(y)),e};p.setCreationDate=function(t){return B(t),this},p.getCreationDate=function(t){return E(t)};var O,j,S,F=p.__private__.padd2=function(t){return("0"+parseInt(t)).slice(-2)},U=0,T=[],k=[],N=0,M=[],R=[],L=k,G=function(){U=0,N=0,k=[],T=[],M=[],it=rt(),ot=rt()},X=function(t){L=t},V=p.__private__.out=function(t){return t=t.toString(),N+=t.length+1,L.push(t),L},Y=p.__private__.write=function(t){return V(1===arguments.length?t.toString():Array.prototype.join.call(arguments," "))},z=p.__private__.getArrayBuffer=function(t){for(var e=t.length,r=new ArrayBuffer(e),a=new Uint8Array(r);e--;)a[e]=t.charCodeAt(e);return r};p.__private__.getPageMode=function(){return j},p.__private__.getLayoutMode=function(){return S};var H,W,K={title:"",subject:"",author:"",keywords:"",creator:""},Z={},$=0,q=[],J=new o(p),Q=t.hotfixes||[],tt={},et=(p.matrixMult=function(t,e){return e.multiply(t)},p.__private__.newObject=function(){var t=rt();return at(t,!0),t}),rt=p.__private__.newObjectDeferred=function(){return U++,T[U]=function(){return N},U},at=function(t,e){return e="boolean"==typeof e&&e,T[t]=N,e&&V(t+" 0 obj"),t},nt=p.__private__.newAdditionalObject=function(){var t={objId:rt(),content:""};return M.push(t),t},it=rt(),ot=rt(),st=p.__private__.getFilters=function(){return h},ct=p.__private__.putStream=function(t){var e=(t=t||{}).data||"",r=t.filters||st(),a=t.alreadyAppliedFilters||[],n=t.addLength1||!1,i=e.length,o={};!0===r&&(r=["FlateEncode"]);var c=t.additionalKeyValues||[],u=(o=void 0!==s.API.processDataByFilters?s.API.processDataByFilters(e,r):{data:e,reverseChain:[]}).reverseChain+(Array.isArray(a)?a.join(" "):a.toString());if(0!==o.data.length&&(c.push({key:"Length",value:o.data.length}),!0===n&&c.push({key:"Length1",value:i})),0!=u.length)if(u.split("/").length-1==1)c.push({key:"Filter",value:u});else{c.push({key:"Filter",value:"["+u+"]"});for(var l=0;l<c.length;l+=1)if("DecodeParms"===c[l].key){for(var h=[],d=0;d<o.reverseChain.split("/").length-1;d+=1)h.push("null");h.push(c[l].value),c[l].value="["+h.join(" ")+"]"}}V("<<");for(var f=0;f<c.length;f++)V("/"+c[f].key+" "+c[f].value);V(">>"),0!==o.data.length&&(V("stream"),V(o.data),V("endstream"))},ut=p.__private__.putPage=function(t){var e=t.number,r=t.data,a=t.objId,n=t.contentsObjId;at(a,!0),V("<</Type /Page"),V("/Parent "+t.rootDictionaryObjId+" 0 R"),V("/Resources "+t.resourceDictionaryObjId+" 0 R"),V("/MediaBox ["+parseFloat(w(t.mediaBox.bottomLeftX))+" "+parseFloat(w(t.mediaBox.bottomLeftY))+" "+w(t.mediaBox.topRightX)+" "+w(t.mediaBox.topRightY)+"]"),null!==t.cropBox&&V("/CropBox ["+w(t.cropBox.bottomLeftX)+" "+w(t.cropBox.bottomLeftY)+" "+w(t.cropBox.topRightX)+" "+w(t.cropBox.topRightY)+"]"),null!==t.bleedBox&&V("/BleedBox ["+w(t.bleedBox.bottomLeftX)+" "+w(t.bleedBox.bottomLeftY)+" "+w(t.bleedBox.topRightX)+" "+w(t.bleedBox.topRightY)+"]"),null!==t.trimBox&&V("/TrimBox ["+w(t.trimBox.bottomLeftX)+" "+w(t.trimBox.bottomLeftY)+" "+w(t.trimBox.topRightX)+" "+w(t.trimBox.topRightY)+"]"),null!==t.artBox&&V("/ArtBox ["+w(t.artBox.bottomLeftX)+" "+w(t.artBox.bottomLeftY)+" "+w(t.artBox.topRightX)+" "+w(t.artBox.topRightY)+"]"),"number"==typeof t.userUnit&&1!==t.userUnit&&V("/UserUnit "+t.userUnit),J.publish("putPage",{objId:a,pageContext:q[e],pageNumber:e,page:r}),V("/Contents "+n+" 0 R"),V(">>"),V("endobj");var i=r.join("\n");return at(n,!0),ct({data:i,filters:st(),objectId:n}),V("endobj"),a},lt=p.__private__.putPages=function(){var t,e,r=[];for(t=1;t<=$;t++)q[t].objId=rt(),q[t].contentsObjId=rt();for(t=1;t<=$;t++)r.push(ut({number:t,data:R[t],objId:q[t].objId,contentsObjId:q[t].contentsObjId,mediaBox:q[t].mediaBox,cropBox:q[t].cropBox,bleedBox:q[t].bleedBox,trimBox:q[t].trimBox,artBox:q[t].artBox,userUnit:q[t].userUnit,rootDictionaryObjId:it,resourceDictionaryObjId:ot}));at(it,!0),V("<</Type /Pages");var a="/Kids [";for(e=0;e<$;e++)a+=r[e]+" 0 R ";V(a+"]"),V("/Count "+$),V(">>"),V("endobj"),J.publish("postPutPages")},ht=function(){for(var t in V("/XObject <<"),tt)tt.hasOwnProperty(t)&&tt[t].objectNumber>=0&&V("/"+t+" "+tt[t].objectNumber+" 0 R");J.publish("putXobjectDict"),V(">>")},dt=function(t){at(t.resourcesOid,!0),V("<<"),V("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ht(),V(">>"),V("endobj")},ft=function(){J.publish("putResources"),[].forEach(dt),dt({resourcesOid:ot,objectOid:Number.MAX_SAFE_INTEGER}),J.publish("postPutResources")},pt=function(t){return t.foo=function(){try{return t.apply(this,arguments)}catch(t){var e=t.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var r="Error in function "+e.split("\n")[0].split("<")[0]+": "+t.message;if(!a.console)throw new Error(r);a.console.error(r,t),a.alert&&alert(r)}},t.foo.bar=t,t.foo},gt=function(t,e){var r,a,n,i,o,s,c,u,l;if(n=(e=e||{}).sourceEncoding||"Unicode",o=e.outputEncoding,(e.autoencode||o)&&Z[H].metadata&&Z[H].metadata[n]&&Z[H].metadata[n].encoding&&(i=Z[H].metadata[n].encoding,!o&&Z[H].encoding&&(o=Z[H].encoding),!o&&i.codePages&&(o=i.codePages[0]),"string"==typeof o&&(o=i[o]),o)){for(c=!1,s=[],r=0,a=t.length;r<a;r++)(u=o[t.charCodeAt(r)])?s.push(String.fromCharCode(u)):s.push(t[r]),s[r].charCodeAt(0)>>8&&(c=!0);t=s.join("")}for(r=t.length;void 0===c&&0!==r;)t.charCodeAt(r-1)>>8&&(c=!0),r--;if(!c)return t;for(s=e.noBOM?[]:[254,255],r=0,a=t.length;r<a;r++){if((l=(u=t.charCodeAt(r))>>8)>>8)throw new Error("Character at position "+r+" of string '"+t+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");s.push(l),s.push(u-(l<<8))}return String.fromCharCode.apply(void 0,s)},_t=p.__private__.pdfEscape=p.pdfEscape=function(t,e){return gt(t,e).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},mt=p.__private__.beginPage=function(t){R[++$]=[],q[$]={objId:0,contentsObjId:0,userUnit:Number(d),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(t[0]),topRightY:Number(t[1])}},yt($),X(R[O])},vt=function(t){var e,r;switch(Array.isArray(t)&&(e=t[0]*W,r=t[1]*W),isNaN(e)&&(e=u[0],r=u[1]),(e>14400||r>14400)&&(i.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),e=Math.min(14400,e),r=Math.min(14400,r)),u=[e,r],n.substr(0,1)){case"l":r>e&&(u=[r,e]);break;case"p":e>r&&(u=[r,e])}mt(u),J.publish("addPage",{pageNumber:$})},yt=function(t){t>0&&t<=$&&(O=t)},bt=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return R.length-1},wt=p.__private__.putInfo=function(){for(var t in V("<<"),V("/Producer ("+_t("jsPDF "+s.version)+")"),K)K.hasOwnProperty(t)&&K[t]&&V("/"+t.substr(0,1).toUpperCase()+t.substr(1)+" ("+_t(K[t])+")");V("/CreationDate ("+_t(y)+")"),V(">>"),V("endobj")},Dt=p.__private__.putCatalog=function(t){var e=(t=t||{}).rootDictionaryObjId||it;switch(et(),V("<<"),V("/Type /Catalog"),V("/Pages "+e+" 0 R"),S||(S="continuous"),S){case"continuous":V("/PageLayout /OneColumn");break;case"single":V("/PageLayout /SinglePage");break;case"two":case"twoleft":V("/PageLayout /TwoColumnLeft");break;case"tworight":V("/PageLayout /TwoColumnRight")}J.publish("putCatalog"),V(">>"),V("endobj")},It=p.__private__.putTrailer=function(){V("trailer"),V("<<"),V("/Size "+(U+1)),V("/Root "+U+" 0 R"),V("/Info "+(U-1)+" 0 R"),V("/ID [ <"+I+"> <"+I+"> ]"),V(">>")},At=p.__private__.putHeader=function(){V("%PDF-"+g),V("%ºß¬à")},Pt=p.__private__.putXRef=function(){var t="0000000000";V("xref"),V("0 "+(U+1)),V("0000000000 65535 f ");for(var e=1;e<=U;e++){"function"==typeof T[e]?V((t+T[e]()).slice(-10)+" 00000 n "):void 0!==T[e]?V((t+T[e]).slice(-10)+" 00000 n "):V("0000000000 00000 n ")}},Ct=p.__private__.buildDocument=function(){G(),X(k),J.publish("buildDocument"),At(),lt(),ft(),wt(),Dt();var t=N;return Pt(),It(),V("startxref"),V(""+t),V("%%EOF"),X(R[O]),k.join("\n")},xt=p.output=p.__private__.output=pt((function(t,r){switch("string"==typeof(r=r||{})?r={filename:r}:r.filename=r.filename||"generated.pdf",t){case"arraybuffer":return z(Ct());case"datauristring":case"dataurlstring":var a="",n=Ct();try{a=e(n)}catch(t){a=e(unescape(encodeURIComponent(n)))}return"data:application/pdf;filename="+r.filename+";base64,"+a;default:return null}})),Bt=function(t){return!0===Array.isArray(Q)&&Q.indexOf(t)>-1};switch(c){case"pt":W=1;break;case"mm":W=72/25.4;break;case"cm":W=72/2.54;break;case"in":W=72;break;case"px":W=1==Bt("px_scaling")?.75:96/72;break;case"pc":case"em":W=12;break;case"ex":W=6;break;default:if("number"!=typeof c)throw new Error("Invalid unit: "+c);W=c}B(),P(),p.addPage=function(){return vt.apply(this,arguments),this};p.__private__.isValidStyle=function(t){var e=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(t)&&(e=!0),e},p.close=function(){return V("h"),this};var Et=p.__private__.getHorizontalCoordinate=function(t){return D(t)},Ot=p.__private__.getVerticalCoordinate=function(t){return q[O].mediaBox.topRightY-q[O].mediaBox.bottomLeftY-D(t)},jt=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(t){return w(Et(t))},St=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(t){return w(Ot(t))};for(var Ft in s.API)s.API.hasOwnProperty(Ft)&&("events"===Ft&&s.API.events.length?function(t,e){var r,a,n;for(n=e.length-1;-1!==n;n--)r=e[n][0],a=e[n][1],t.subscribe.apply(t,[r].concat("function"==typeof a?[a]:a))}(J,s.API.events):p[Ft]=s.API[Ft]);return p.internal={pdfEscape:_t,write:Y,getHorizontalCoordinate:Et,getVerticalCoordinate:Ot,getCoordinateString:jt,getVerticalCoordinateString:St,collections:{},newObject:et,newAdditionalObject:nt,newObjectDeferred:rt,newObjectDeferredBegin:at,getFilters:st,putStream:ct,events:J,scaleFactor:W,output:xt,getNumberOfPages:bt,pages:R,out:V,getPDFVersion:_,hasHotfix:Bt},H="F1",vt(u),J.publish("initialized"),p}s.API={events:[]},s.version="2.5.1",
/** @license
 * jsPDF addImage plugin
 * Copyright (c) 2012 Jason Siefken, https://github.com/siefkenj/
 *               2013 Chris Dowling, https://github.com/gingerchris
 *               2013 Trinh Ho, https://github.com/ineedfat
 *               2013 Edwin Alejandro Perez, https://github.com/eaparango
 *               2013 Norah Smith, https://github.com/burnburnrocket
 *               2014 Diego Casorran, https://github.com/diegocr
 *               2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
function(e){e.__addimage__={};var r=function(t){for(var e=this.internal.write,a=this.internal.putStream,n=(0,this.internal.getFilters)();-1!==n.indexOf("FlateEncode");)n.splice(n.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var i=[];if(i.push({key:"Type",value:"/XObject"}),i.push({key:"Subtype",value:"/Image"}),i.push({key:"Width",value:t.width}),i.push({key:"Height",value:t.height}),t.colorSpace===d.INDEXED?i.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(i.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===d.DEVICE_CMYK&&i.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),i.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&i.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)){for(var o="",s=0,c=t.transparency.length;s<c;s++)o+=t.transparency[s]+" "+t.transparency[s]+" ";i.push({key:"Mask",value:"["+o+"]"})}void 0!==t.sMask&&i.push({key:"SMask",value:t.objectId+1+" 0 R"});var u=void 0!==t.filter?["/"+t.filter]:void 0;if(a({data:t.data,additionalKeyValues:i,alreadyAppliedFilters:u,objectId:t.objectId}),e("endobj"),"sMask"in t&&void 0!==t.sMask){var l="/Predictor "+t.predictor+" /Colors 1 /BitsPerComponent "+t.bitsPerComponent+" /Columns "+t.width,h={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:t.bitsPerComponent,decodeParameters:l,data:t.sMask};"filter"in t&&(h.filter=t.filter),r.call(this,h)}if(t.colorSpace===d.INDEXED){var f=this.internal.newObject();a({data:b(new Uint8Array(t.palette)),objectId:f}),e("endobj")}},a=function(){var t=this.internal.collections.addImage_images;for(var e in t)r.call(this,t[e])},n=function(){var t,e=this.internal.collections.addImage_images,r=this.internal.write;for(var a in e)r("/I"+(t=e[a]).index,t.objectId,"0","R")},i=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",n))},o=function(){var t=this.internal.collections.addImage_images;return i.call(this),t},s=function(){return Object.keys(this.internal.collections.addImage_images).length},c=function(t){return"function"==typeof e["process"+t.toUpperCase()]},u=function(t){var e=this.internal.collections.addImage_images;if(e)for(var r in e)if(t===e[r].alias)return e[r]},l=function(t,e,r){return t||e||(t=-96,e=-96),t<0&&(t=-1*r.width*72/t/this.internal.scaleFactor),e<0&&(e=-1*r.height*72/e/this.internal.scaleFactor),0===t&&(t=e*r.width/r.height),0===e&&(e=t*r.height/r.width),[t,e]},h=function(t,e,r,a,n,i){var s=l.call(this,r,a,n),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,h=o.call(this);if(r=s[0],a=s[1],h[n.index]=n,i){i*=Math.PI/180;var d=Math.cos(i),f=Math.sin(i),p=function(t){return t.toFixed(4)},g=[p(d),p(f),p(-1*f),p(d),0,0,"cm"]}this.internal.write("q"),i?(this.internal.write([1,"0","0",1,c(t),u(e+a),"cm"].join(" ")),this.internal.write(g.join(" ")),this.internal.write([c(r),"0","0",c(a),"0","0","cm"].join(" "))):this.internal.write([c(r),"0","0",c(a),c(t),u(e+a),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+n.index+" Do"),this.internal.write("Q")},d=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var f=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},p=e.__addimage__.sHashCode=function(t){var e,r,a=0;if("string"==typeof t)for(r=t.length,e=0;e<r;e++)a=(a<<5)-a+t.charCodeAt(e),a|=0;else if(v(t))for(r=t.byteLength/2,e=0;e<r;e++)a=(a<<5)-a+t[e],a|=0;return a},g=e.__addimage__.validateStringAsBase64=function(t){(t=t||"").toString().trim();var e=!0;return 0===t.length&&(e=!1),t.length%4!=0&&(e=!1),!1===/^[A-Za-z0-9+/]+$/.test(t.substr(0,t.length-2))&&(e=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(t.substr(-2))&&(e=!1),e},_=e.__addimage__.extractImageFromDataUrl=function(t){var e=(t=t||"").split("base64,"),r=null;if(2===e.length){var a=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(e[0]);Array.isArray(a)&&(r={mimeType:a[1],charset:a[2],data:e[1]})}return r},m=e.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};e.__addimage__.isArrayBuffer=function(t){return m()&&t instanceof ArrayBuffer};var v=e.__addimage__.isArrayBufferView=function(t){return m()&&"undefined"!=typeof Uint32Array&&(t instanceof Int8Array||t instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)},y=e.__addimage__.binaryStringToUint8Array=function(t){for(var e=t.length,r=new Uint8Array(e),a=0;a<e;a++)r[a]=t.charCodeAt(a);return r},b=e.__addimage__.arrayBufferToBinaryString=function(t){for(var e="",r=v(t)?t:new Uint8Array(t),a=0;a<r.length;a+=8192)e+=String.fromCharCode.apply(null,r.subarray(a,a+8192));return e};e.addImage=function(){var t,e,r,a,n,o,s,c,u;t=arguments[0],e=arguments[1],r=arguments[2],a=arguments[3],n=arguments[4],o=arguments[5],s=arguments[6],c=arguments[7],u=arguments[8];var l=this.internal.getFilters();if(void 0===c&&-1!==l.indexOf("FlateEncode")&&(c="SLOW"),isNaN(r)||isNaN(a))throw new Error("Invalid coordinates passed to jsPDF.addImage");i.call(this);var d=w.call(this,t,e,s,c);return h.call(this,r,a,n,o,d,u),this};var w=function(t,r,a,n){var i,o,l;if(t=unescape(t),t=D(t,!1),"PNG",!c("PNG"))throw new Error("addImage does not support files of type 'PNG', please ensure that a plugin for 'PNG' support is added.");if((null==(l=a)||0===l.length)&&(a=function(t){return"string"==typeof t||v(t)?p(t):v(t.data)?p(t.data):null}(t)),(i=u.call(this,a))||(m()&&(t instanceof Uint8Array||(o=t,t=y(t))),i=this["process"+"PNG".toUpperCase()](t,s.call(this),a,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:f.NONE}(n),o)),!i)throw new Error("An unknown error occurred whilst processing the image.");return i},D=e.__addimage__.convertBase64ToBinaryString=function(e,r){var a;r="boolean"!=typeof r||r;var n,i="";if("string"==typeof e){n=null!==(a=_(e))?a.data:e;try{i=t(n)}catch(t){if(r)throw g(n)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+t.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return i};e.getImageProperties=function(t){var e;if(t=D(t,!1),!c("PNG"))throw new Error("addImage does not support files of type 'PNG', please ensure that a plugin for 'PNG' support is added.");if(!m()||t instanceof Uint8Array||(t=y(t)),!(e=this["process"+"PNG".toUpperCase()](t)))throw new Error("An unknown error occurred whilst processing the image");return e.fileType="PNG",e}}(s.API);var c,u,l,h,d,f,p,g,_,m,v,y,b=function(){var t,e,n;function i(t){var e,r,a,n,i,o,s,c,u,l,h,d,f,p;for(this.data=t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},o=null;;){switch(e=this.readUInt32(),u=function(){var t,e;for(e=[],t=0;t<4;++t)e.push(String.fromCharCode(this.data[this.pos++]));return e}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(e);break;case"fcTL":o&&this.animation.frames.push(o),this.pos+=4,o={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},i=this.readUInt16(),n=this.readUInt16()||100,o.delay=1e3*i/n,o.disposeOp=this.data[this.pos++],o.blendOp=this.data[this.pos++],o.data=[];break;case"IDAT":case"fdAT":for("fdAT"===u&&(this.pos+=4,e-=4),t=(null!=o?o.data:void 0)||this.imgData,d=0;0<=e?d<e:d>e;0<=e?++d:--d)t.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(a=this.palette.length/3,this.transparency.indexed=this.read(e),this.transparency.indexed.length>a)throw new Error("More transparent colors than palette size");if((l=a-this.transparency.indexed.length)>0)for(f=0;0<=l?f<l:f>l;0<=l?++f:--f)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case"tEXt":s=(h=this.read(e)).indexOf(0),c=String.fromCharCode.apply(String,h.slice(0,s)),this.text[c]=String.fromCharCode.apply(String,h.slice(s+1));break;case"IEND":return o&&this.animation.frames.push(o),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(p=this.colorType)||6===p,r=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*r,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=e}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(t){var e,r;for(r=[],e=0;0<=t?e<t:e>t;0<=t?++e:--e)r.push(this.data[this.pos++]);return r},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(t){var e=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*e),n=0,i=this;if(null==t&&(t=this.imgData),0===t.length)return new Uint8Array(0);function o(r,o,s,c){var u,l,h,d,f,p,g,_,m,v,y,b,w,D,I,A,P,C,x,B,E,O=Math.ceil((i.width-r)/s),j=Math.ceil((i.height-o)/c),S=i.width==O&&i.height==j;for(D=e*O,b=S?a:new Uint8Array(D*j),p=t.length,w=0,l=0;w<j&&n<p;){switch(t[n++]){case 0:for(d=P=0;P<D;d=P+=1)b[l++]=t[n++];break;case 1:for(d=C=0;C<D;d=C+=1)u=t[n++],f=d<e?0:b[l-e],b[l++]=(u+f)%256;break;case 2:for(d=x=0;x<D;d=x+=1)u=t[n++],h=(d-d%e)/e,I=w&&b[(w-1)*D+h*e+d%e],b[l++]=(I+u)%256;break;case 3:for(d=B=0;B<D;d=B+=1)u=t[n++],h=(d-d%e)/e,f=d<e?0:b[l-e],I=w&&b[(w-1)*D+h*e+d%e],b[l++]=(u+Math.floor((f+I)/2))%256;break;case 4:for(d=E=0;E<D;d=E+=1)u=t[n++],h=(d-d%e)/e,f=d<e?0:b[l-e],0===w?I=A=0:(I=b[(w-1)*D+h*e+d%e],A=h&&b[(w-1)*D+(h-1)*e+d%e]),g=f+I-A,_=Math.abs(g-f),v=Math.abs(g-I),y=Math.abs(g-A),m=_<=v&&_<=y?f:v<=y?I:A,b[l++]=(u+m)%256;break;default:throw new Error("Invalid filter algorithm: "+t[n-1])}if(!S){var F=((o+w*c)*i.width+r)*e,U=w*D;for(d=0;d<O;d+=1){for(var T=0;T<e;T+=1)a[F++]=b[U++];F+=(s-1)*e}}w++}}return t=r.unzlibSync(t),1==i.interlaceMethod?(o(0,0,8,8),o(4,0,8,8),o(0,4,4,8),o(2,0,4,4),o(0,2,2,4),o(1,0,2,2),o(0,1,1,2)):o(0,0,1,1),a},i.prototype.decodePalette=function(){var t,e,r,a,n,i,o,s,c;for(r=this.palette,i=this.transparency.indexed||[],n=new Uint8Array((i.length||0)+r.length),a=0,t=0,e=o=0,s=r.length;o<s;e=o+=3)n[a++]=r[e],n[a++]=r[e+1],n[a++]=r[e+2],n[a++]=null!=(c=i[t++])?c:255;return n},i.prototype.copyToImageData=function(t,e){var r,a,n,i,o,s,c,u,l,h,d;if(a=this.colors,l=null,r=this.hasAlphaChannel,this.palette.length&&(l=null!=(d=this._decodedPalette)?d:this._decodedPalette=this.decodePalette(),a=4,r=!0),u=(n=t.data||t).length,o=l||e,i=s=0,1===a)for(;i<u;)c=l?4*e[i/4]:s,h=o[c++],n[i++]=h,n[i++]=h,n[i++]=h,n[i++]=r?o[c++]:255,s=c;else for(;i<u;)c=l?4*e[i/4]:s,n[i++]=o[c++],n[i++]=o[c++],n[i++]=o[c++],n[i++]=r?o[c++]:255,s=c},i.prototype.decode=function(){var t;return t=new Uint8Array(this.width*this.height*4),this.copyToImageData(t,this.decodePixels()),t};var o=function(){if("[object Window]"===Object.prototype.toString.call(a)){try{e=a.document.createElement("canvas"),n=e.getContext("2d")}catch(t){return!1}return!0}return!1};return o(),t=function(t){var r;if(!0===o())return n.width=t.width,n.height=t.height,n.clearRect(0,0,t.width,t.height),n.putImageData(t,0,0),(r=new Image).src=e.toDataURL(),r;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(e){var r,a,n,i,o,s,c,u;if(this.animation){for(u=[],a=o=0,s=(c=this.animation.frames).length;o<s;a=++o)r=c[a],n=e.createImageData(r.width,r.height),i=this.decodePixels(new Uint8Array(r.data)),this.copyToImageData(n,i),r.imageData=n,u.push(r.image=t(n));return u}},i.prototype.renderFrame=function(t,e){var r,a,n;return r=(a=this.animation.frames)[e],n=a[e-1],0===e&&t.clearRect(0,0,this.width,this.height),1===(null!=n?n.disposeOp:void 0)?t.clearRect(n.xOffset,n.yOffset,n.width,n.height):2===(null!=n?n.disposeOp:void 0)&&t.putImageData(n.imageData,n.xOffset,n.yOffset),0===r.blendOp&&t.clearRect(r.xOffset,r.yOffset,r.width,r.height),t.drawImage(r.image,r.xOffset,r.yOffset)},i.prototype.animate=function(t){var e,r,a,n,i,o,s=this;return r=0,o=this.animation,n=o.numFrames,a=o.frames,i=o.numPlays,(e=function(){var o,c;if(o=r++%n,c=a[o],s.renderFrame(t,o),n>1&&r/n<i)return s.animation._timeout=setTimeout(e,c.delay)})()},i.prototype.stopAnimation=function(){var t;return clearTimeout(null!=(t=this.animation)?t._timeout:void 0)},i.prototype.render=function(t){var e,r;return t._png&&t._png.stopAnimation(),t._png=this,t.width=this.width,t.height=this.height,e=t.getContext("2d"),this.animation?(this.decodeFrames(e),this.animate(e)):(r=e.createImageData(this.width,this.height),this.copyToImageData(r,this.decodePixels()),e.putImageData(r,0,0))},i}();
/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */c=s.API,u=function(){return"function"==typeof zlibSync},l=function(t,e,r,a){var n=4,i=p;switch(a){case c.image_compression.FAST:n=1,i=f;break;case c.image_compression.MEDIUM:n=6,i=g;break;case c.image_compression.SLOW:n=9,i=_}t=h(t,e,r,i);var o=zlibSync(t,{level:n});return c.__addimage__.arrayBufferToBinaryString(o)},h=function(t,e,r,a){for(var n,i,o,s=t.length/e,c=new Uint8Array(t.length+s),u=v(),l=0;l<s;l+=1){if(o=l*e,n=t.subarray(o,o+e),a)c.set(a(n,r,i),o+l);else{for(var h,d=u.length,f=[];h<d;h+=1)f[h]=u[h](n,r,i);var p=y(f.concat());c.set(f[p],o+l)}i=n}return c},d=function(t){var e=Array.apply([],t);return e.unshift(0),e},f=function(t,e){var r,a=[],n=t.length;a[0]=1;for(var i=0;i<n;i+=1)r=t[i-e]||0,a[i+1]=t[i]-r+256&255;return a},p=function(t,e,r){var a,n=[],i=t.length;n[0]=2;for(var o=0;o<i;o+=1)a=r&&r[o]||0,n[o+1]=t[o]-a+256&255;return n},g=function(t,e,r){var a,n,i=[],o=t.length;i[0]=3;for(var s=0;s<o;s+=1)a=t[s-e]||0,n=r&&r[s]||0,i[s+1]=t[s]+256-(a+n>>>1)&255;return i},_=function(t,e,r){var a,n,i,o,s=[],c=t.length;s[0]=4;for(var u=0;u<c;u+=1)a=t[u-e]||0,n=r&&r[u]||0,i=r&&r[u-e]||0,o=m(a,n,i),s[u+1]=t[u]-o+256&255;return s},m=function(t,e,r){if(t===e&&e===r)return t;var a=Math.abs(e-r),n=Math.abs(t-r),i=Math.abs(t+e-r-r);return a<=n&&a<=i?t:n<=i?e:r},v=function(){return[d,f,p,g,_]},y=function(t){var e=t.map((function(t){return t.reduce((function(t,e){return t+Math.abs(e)}),0)}));return e.indexOf(Math.min.apply(null,e))},c.processPNG=function(t,e,r,a){var n,i,o,s,h,d,f,p,g,_,m,v,y,w,D,I=this.decode.FLATE_DECODE,A="";if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){if(t=(o=new b(t)).imgData,i=o.bits,n=o.colorSpace,h=o.colors,-1!==[4,6].indexOf(o.colorType)){if(8===o.bits){g=(p=32==o.pixelBitlength?new Uint32Array(o.decodePixels().buffer):16==o.pixelBitlength?new Uint16Array(o.decodePixels().buffer):new Uint8Array(o.decodePixels().buffer)).length,m=new Uint8Array(g*o.colors),_=new Uint8Array(g);var P,C=o.pixelBitlength-o.bits;for(w=0,D=0;w<g;w++){for(y=p[w],P=0;P<C;)m[D++]=y>>>P&255,P+=o.bits;_[w]=y>>>P&255}}if(16===o.bits){g=(p=new Uint32Array(o.decodePixels().buffer)).length,m=new Uint8Array(g*(32/o.pixelBitlength)*o.colors),_=new Uint8Array(g*(32/o.pixelBitlength)),v=o.colors>1,w=0,D=0;for(var x=0;w<g;)y=p[w++],m[D++]=y>>>0&255,v&&(m[D++]=y>>>16&255,y=p[w++],m[D++]=y>>>0&255),_[x++]=y>>>16&255;i=8}a!==c.image_compression.NONE&&u()?(t=l(m,o.width*o.colors,o.colors,a),f=l(_,o.width,1,a)):(t=m,f=_,I=void 0)}if(3===o.colorType&&(n=this.color_spaces.INDEXED,d=o.palette,o.transparency.indexed)){var B=o.transparency.indexed,E=0;for(w=0,g=B.length;w<g;++w)E+=B[w];if((E/=255)==g-1&&-1!==B.indexOf(0))s=[B.indexOf(0)];else if(E!==g){for(p=o.decodePixels(),_=new Uint8Array(p.length),w=0,g=p.length;w<g;w++)_[w]=B[p[w]];f=l(_,o.width,1)}}var O=function(t){var e;switch(t){case c.image_compression.FAST:e=11;break;case c.image_compression.MEDIUM:e=13;break;case c.image_compression.SLOW:e=14;break;default:e=12}return e}(a);return I===this.decode.FLATE_DECODE&&(A="/Predictor "+O+" "),A+="/Colors "+h+" /BitsPerComponent "+i+" /Columns "+o.width,(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:r,data:t,index:e,filter:I,decodeParameters:A,transparency:s,palette:d,sMask:f,predictor:O,width:o.width,height:o.height,bitsPerComponent:i,colorSpace:n}}},exports.default=s,exports.jsPDF=s;
//# sourceMappingURL=jspdf.node.min.js.map
