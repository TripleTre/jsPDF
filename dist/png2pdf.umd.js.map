{"version":3,"file":"png2pdf.umd.js","sources":["../src/libs/globalObject.js","../src/libs/AtobBtoa.js","../src/libs/console.js","../src/jspdf.js","../src/modules/addimage.js","../node_modules/fflate/esm/index.mjs","../src/libs/png.js","../src/modules/png_support.js","../src/index.js"],"sourcesContent":["export var globalObject = (function() {\n  return \"undefined\" !== typeof window\n    ? window\n    : \"undefined\" !== typeof global\n    ? global\n    : \"undefined\" !== typeof self\n    ? self\n    : this;\n})();\n","import { globalObject } from \"./globalObject.js\";\n\nvar atob, btoa;\n\n(function() {\n  atob = globalObject.atob.bind(globalObject);\n  btoa = globalObject.btoa.bind(globalObject);\n  return;\n\n})();\n\nexport { atob, btoa };\n","import { globalObject } from \"./globalObject.js\";\n\nfunction consoleLog() {\n  if (globalObject.console && typeof globalObject.console.log === \"function\") {\n    globalObject.console.log.apply(globalObject.console, arguments);\n  }\n}\n\nfunction consoleWarn(str) {\n  if (globalObject.console) {\n    if (typeof globalObject.console.warn === \"function\") {\n      globalObject.console.warn.apply(globalObject.console, arguments);\n    } else {\n      consoleLog.call(null, arguments);\n    }\n  }\n}\n\nfunction consoleError(str) {\n  if (globalObject.console) {\n    if (typeof globalObject.console.error === \"function\") {\n      globalObject.console.error.apply(globalObject.console, arguments);\n    } else {\n      consoleLog(str);\n    }\n  }\n}\nexport var console = {\n  log: consoleLog,\n  warn: consoleWarn,\n  error: consoleError\n};\n","/* eslint-disable no-console */\n\nimport { globalObject } from \"./libs/globalObject.js\";\nimport { btoa } from \"./libs/AtobBtoa.js\";\nimport { console } from \"./libs/console.js\";\n/**\n * jsPDF's Internal PubSub Implementation.\n * Backward compatible rewritten on 2014 by\n * Diego Casorran, https://github.com/diegocr\n *\n * @class\n * @name PubSub\n * @ignore\n */\nfunction PubSub(context) {\n  if (typeof context !== \"object\") {\n    throw new Error(\n      \"Invalid Context passed to initialize PubSub (jsPDF-module)\"\n    );\n  }\n  var topics = {};\n\n  this.subscribe = function(topic, callback, once) {\n    once = once || false;\n    if (\n      typeof topic !== \"string\" ||\n      typeof callback !== \"function\" ||\n      typeof once !== \"boolean\"\n    ) {\n      throw new Error(\n        \"Invalid arguments passed to PubSub.subscribe (jsPDF-module)\"\n      );\n    }\n\n    if (!topics.hasOwnProperty(topic)) {\n      topics[topic] = {};\n    }\n\n    var token = Math.random().toString(35);\n    topics[topic][token] = [callback, !!once];\n\n    return token;\n  };\n\n  this.unsubscribe = function(token) {\n    for (var topic in topics) {\n      if (topics[topic][token]) {\n        delete topics[topic][token];\n        if (Object.keys(topics[topic]).length === 0) {\n          delete topics[topic];\n        }\n        return true;\n      }\n    }\n    return false;\n  };\n\n  this.publish = function(topic) {\n    if (topics.hasOwnProperty(topic)) {\n      var args = Array.prototype.slice.call(arguments, 1),\n        tokens = [];\n\n      for (var token in topics[topic]) {\n        var sub = topics[topic][token];\n        try {\n          sub[0].apply(context, args);\n        } catch (ex) {\n          if (globalObject.console) {\n            console.error(\"jsPDF PubSub Error\", ex.message, ex);\n          }\n        }\n        if (sub[1]) tokens.push(token);\n      }\n      if (tokens.length) tokens.forEach(this.unsubscribe);\n    }\n  };\n\n  this.getTopics = function() {\n    return topics;\n  };\n}\n\n/**\n * Creates new jsPDF document object instance.\n * @name jsPDF\n * @class\n * @param {Object} [options] - Collection of settings initializing the jsPDF-instance\n * @param {string} [options.orientation=portrait] - Orientation of the first page. Possible values are \"portrait\" or \"landscape\" (or shortcuts \"p\" or \"l\").<br />\n * @param {string} [options.unit=mm] Measurement unit (base unit) to be used when coordinates are specified.<br />\n * Possible values are \"pt\" (points), \"mm\", \"cm\", \"in\", \"px\", \"pc\", \"em\" or \"ex\". Note that in order to get the correct scaling for \"px\"\n * units, you need to enable the hotfix \"px_scaling\" by setting options.hotfixes = [\"px_scaling\"].\n * @param {string/Array} [options.format=a4] The format of the first page. Can be:<ul><li>a0 - a10</li><li>b0 - b10</li><li>c0 - c10</li><li>dl</li><li>letter</li><li>government-letter</li><li>legal</li><li>junior-legal</li><li>ledger</li><li>tabloid</li><li>credit-card</li></ul><br />\n * Default is \"a4\". If you want to use your own format just pass instead of one of the above predefined formats the size as an number-array, e.g. [595.28, 841.89]\n * @param {boolean} [options.putOnlyUsedFonts=false] Only put fonts into the PDF, which were used.\n * @param {boolean} [options.compress=false] Compress the generated PDF.\n * @param {number} [options.precision=16] Precision of the element-positions.\n * @param {number} [options.userUnit=1.0] Not to be confused with the base unit. Please inform yourself before you use it.\n * @param {string[]} [options.hotfixes] An array of strings to enable hotfixes such as correct pixel scaling.\n * @param {Object} [options.encryption]\n * @param {string} [options.encryption.userPassword] Password for the user bound by the given permissions list.\n * @param {string} [options.encryption.ownerPassword] Both userPassword and ownerPassword should be set for proper authentication.\n * @param {string[]} [options.encryption.userPermissions] Array of permissions \"print\", \"modify\", \"copy\", \"annot-forms\", accessible by the user.\n * @param {number|\"smart\"} [options.floatPrecision=16]\n * @returns {jsPDF} jsPDF-instance\n * @description\n * ```\n * {\n *  orientation: 'p',\n *  unit: 'mm',\n *  format: 'a4',\n *  putOnlyUsedFonts:true,\n *  floatPrecision: 16 // or \"smart\", default is 16\n * }\n * ```\n *\n * @constructor\n */\nfunction jsPDF(options) {\n  var orientation = typeof arguments[0] === \"string\" ? arguments[0] : \"p\";\n  var unit = arguments[1];\n  var format = arguments[2];\n  var compressPdf = arguments[3];\n  var filters = [];\n  var userUnit = 1.0;\n  var precision;\n  var floatPrecision = 16;\n\n  options = options || {};\n\n  if (typeof options === \"object\") {\n    orientation = options.orientation;\n    unit = options.unit || unit;\n    format = options.format || format;\n    compressPdf = options.compress || options.compressPdf || compressPdf;\n    userUnit =\n      typeof options.userUnit === \"number\" ? Math.abs(options.userUnit) : 1.0;\n    if (typeof options.precision !== \"undefined\") {\n      precision = options.precision;\n    }\n    if (typeof options.floatPrecision !== \"undefined\") {\n      floatPrecision = options.floatPrecision;\n    }\n  }\n\n  filters =\n    options.filters || (compressPdf === true ? [\"FlateEncode\"] : filters);\n\n  unit = unit || \"mm\";\n  orientation = (\"\" + (orientation || \"P\")).toLowerCase();\n\n  var API = {\n    internal: {},\n    __private__: {}\n  };\n\n  API.__private__.PubSub = PubSub;\n\n  var pdfVersion = \"1.3\";\n  var getPdfVersion = (API.__private__.getPdfVersion = function() {\n    return pdfVersion;\n  });\n\n  API.__private__.setPdfVersion = function(value) {\n    pdfVersion = value;\n  };\n\n  format = format || \"a4\";\n\n  var ApiMode = {\n    COMPAT: \"compat\",\n    ADVANCED: \"advanced\"\n  };\n  var apiMode = ApiMode.COMPAT;\n\n  /**\n   * @return {boolean} True iff the current API mode is \"advanced\". See {@link advancedAPI}.\n   * @memberof jsPDF#\n   * @name isAdvancedAPI\n   */\n  API.isAdvancedAPI = function() {\n    return apiMode === ApiMode.ADVANCED;\n  };\n\n  var roundToPrecision = (API.roundToPrecision = API.__private__.roundToPrecision = function(\n    number,\n    parmPrecision\n  ) {\n    var tmpPrecision = precision || parmPrecision;\n    if (isNaN(number) || isNaN(tmpPrecision)) {\n      throw new Error(\"Invalid argument passed to jsPDF.roundToPrecision\");\n    }\n    return number.toFixed(tmpPrecision).replace(/0+$/, \"\");\n  });\n\n  // high precision float\n  var hpf = (API.hpf = API.__private__.hpf = function(number) {\n    if (isNaN(number)) {\n      throw new Error(\"Invalid argument passed to jsPDF.hpf\");\n    }\n    return roundToPrecision(number, floatPrecision);\n  });\n\n  var scale = (API.scale = API.__private__.scale = function(number) {\n    if (isNaN(number)) {\n      throw new Error(\"Invalid argument passed to jsPDF.scale\");\n    }\n    if (apiMode === ApiMode.COMPAT) {\n      return number * scaleFactor;\n    } else if (apiMode === ApiMode.ADVANCED) {\n      return number;\n    }\n  });\n\n  var fileId = \"00000000000000000000000000000000\";\n\n  var getFileId = (API.__private__.getFileId = function() {\n    return fileId;\n  });\n\n  var setFileId = (API.__private__.setFileId = function(value) {\n    if (typeof value !== \"undefined\" && /^[a-fA-F0-9]{32}$/.test(value)) {\n      fileId = value.toUpperCase();\n    } else {\n      fileId = fileId\n        .split(\"\")\n        .map(function() {\n          return \"ABCDEF0123456789\".charAt(Math.floor(Math.random() * 16));\n        })\n        .join(\"\");\n    }\n    return fileId;\n  });\n\n  /**\n   * @name setFileId\n   * @memberof jsPDF#\n   * @function\n   * @instance\n   * @param {string} value GUID.\n   * @returns {jsPDF}\n   */\n  API.setFileId = function(value) {\n    setFileId(value);\n    return this;\n  };\n\n  /**\n   * @name getFileId\n   * @memberof jsPDF#\n   * @function\n   * @instance\n   *\n   * @returns {string} GUID.\n   */\n  API.getFileId = function() {\n    return getFileId();\n  };\n\n  var creationDate;\n\n  var convertDateToPDFDate = (API.__private__.convertDateToPDFDate = function(\n    parmDate\n  ) {\n    var result = \"\";\n    var tzoffset = parmDate.getTimezoneOffset(),\n      tzsign = tzoffset < 0 ? \"+\" : \"-\",\n      tzhour = Math.floor(Math.abs(tzoffset / 60)),\n      tzmin = Math.abs(tzoffset % 60),\n      timeZoneString = [tzsign, padd2(tzhour), \"'\", padd2(tzmin), \"'\"].join(\"\");\n\n    result = [\n      \"D:\",\n      parmDate.getFullYear(),\n      padd2(parmDate.getMonth() + 1),\n      padd2(parmDate.getDate()),\n      padd2(parmDate.getHours()),\n      padd2(parmDate.getMinutes()),\n      padd2(parmDate.getSeconds()),\n      timeZoneString\n    ].join(\"\");\n    return result;\n  });\n\n  var convertPDFDateToDate = (API.__private__.convertPDFDateToDate = function(\n    parmPDFDate\n  ) {\n    var year = parseInt(parmPDFDate.substr(2, 4), 10);\n    var month = parseInt(parmPDFDate.substr(6, 2), 10) - 1;\n    var date = parseInt(parmPDFDate.substr(8, 2), 10);\n    var hour = parseInt(parmPDFDate.substr(10, 2), 10);\n    var minutes = parseInt(parmPDFDate.substr(12, 2), 10);\n    var seconds = parseInt(parmPDFDate.substr(14, 2), 10);\n    // var timeZoneHour = parseInt(parmPDFDate.substr(16, 2), 10);\n    // var timeZoneMinutes = parseInt(parmPDFDate.substr(20, 2), 10);\n\n    var resultingDate = new Date(year, month, date, hour, minutes, seconds, 0);\n    return resultingDate;\n  });\n\n  var setCreationDate = (API.__private__.setCreationDate = function(date) {\n    var tmpCreationDateString;\n    var regexPDFCreationDate = /^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\\+0[0-9]|\\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/;\n    if (typeof date === \"undefined\") {\n      date = new Date();\n    }\n\n    if (date instanceof Date) {\n      tmpCreationDateString = convertDateToPDFDate(date);\n    } else if (regexPDFCreationDate.test(date)) {\n      tmpCreationDateString = date;\n    } else {\n      throw new Error(\"Invalid argument passed to jsPDF.setCreationDate\");\n    }\n    creationDate = tmpCreationDateString;\n    return creationDate;\n  });\n\n  var getCreationDate = (API.__private__.getCreationDate = function(type) {\n    var result = creationDate;\n    if (type === \"jsDate\") {\n      result = convertPDFDateToDate(creationDate);\n    }\n    return result;\n  });\n\n  /**\n   * @name setCreationDate\n   * @memberof jsPDF#\n   * @function\n   * @instance\n   * @param {Object} date\n   * @returns {jsPDF}\n   */\n  API.setCreationDate = function(date) {\n    setCreationDate(date);\n    return this;\n  };\n\n  /**\n   * @name getCreationDate\n   * @memberof jsPDF#\n   * @function\n   * @instance\n   * @param {Object} type\n   * @returns {Object}\n   */\n  API.getCreationDate = function(type) {\n    return getCreationDate(type);\n  };\n\n  var padd2 = (API.__private__.padd2 = function(number) {\n    return (\"0\" + parseInt(number)).slice(-2);\n  });\n\n  var objectNumber = 0; // 'n' Current object number\n  var offsets = []; // List of offsets. Activated and reset by buildDocument(). Pupulated by various calls buildDocument makes.\n  var content = [];\n  var contentLength = 0;\n  var additionalObjects = [];\n\n  var pages = [];\n  var currentPage;\n  var hasCustomDestination = false;\n  var outputDestination = content;\n\n  var resetDocument = function() {\n    //reset fields relevant for objectNumber generation and xref.\n    objectNumber = 0;\n    contentLength = 0;\n    content = [];\n    offsets = [];\n    additionalObjects = [];\n\n    rootDictionaryObjId = newObjectDeferred();\n    resourceDictionaryObjId = newObjectDeferred();\n  };\n\n  var setOutputDestination = function(destination) {\n    if (!hasCustomDestination) {\n      outputDestination = destination;\n    }\n  };\n\n  var out = (API.__private__.out = function(string) {\n    string = string.toString();\n    contentLength += string.length + 1;\n    outputDestination.push(string);\n\n    return outputDestination;\n  });\n\n  var write = (API.__private__.write = function(value) {\n    return out(\n      arguments.length === 1\n        ? value.toString()\n        : Array.prototype.join.call(arguments, \" \")\n    );\n  });\n\n  var getArrayBuffer = (API.__private__.getArrayBuffer = function(data) {\n    var len = data.length,\n      ab = new ArrayBuffer(len),\n      u8 = new Uint8Array(ab);\n\n    while (len--) u8[len] = data.charCodeAt(len);\n    return ab;\n  });\n\n  var pageMode; // default: 'UseOutlines';\n\n  API.__private__.getPageMode = function() {\n    return pageMode;\n  };\n\n  var layoutMode; // default: 'continuous';\n\n  API.__private__.getLayoutMode = function() {\n    return layoutMode;\n  };\n\n  var documentProperties = {\n    title: \"\",\n    subject: \"\",\n    author: \"\",\n    keywords: \"\",\n    creator: \"\"\n  };\n\n  var fonts = {}; // collection of font objects, where key is fontKey - a dynamically created label for a given font.\n  var activeFontKey; // will be string representing the KEY of the font as combination of fontName + fontStyle\n  var scaleFactor; // Scale factor\n  var page = 0;\n  var pagesContext = [];\n  var events = new PubSub(API);\n  var hotfixes = options.hotfixes || [];\n\n  var renderTargets = {};\n\n  /**\n   * Multiplies two matrices. (see {@link Matrix})\n   * @param {Matrix} m1\n   * @param {Matrix} m2\n   * @memberof jsPDF#\n   * @name matrixMult\n   */\n  var matrixMult = (API.matrixMult = function(m1, m2) {\n    return m2.multiply(m1);\n  });\n\n  var newObject = (API.__private__.newObject = function() {\n    var oid = newObjectDeferred();\n    newObjectDeferredBegin(oid, true);\n    return oid;\n  });\n\n  // Does not output the object.  The caller must call newObjectDeferredBegin(oid) before outputing any data\n  var newObjectDeferred = (API.__private__.newObjectDeferred = function() {\n    objectNumber++;\n    offsets[objectNumber] = function() {\n      return contentLength;\n    };\n    return objectNumber;\n  });\n\n  var newObjectDeferredBegin = function(oid, doOutput) {\n    doOutput = typeof doOutput === \"boolean\" ? doOutput : false;\n    offsets[oid] = contentLength;\n    if (doOutput) {\n      out(oid + \" 0 obj\");\n    }\n    return oid;\n  };\n  // Does not output the object until after the pages have been output.\n  // Returns an object containing the objectId and content.\n  // All pages have been added so the object ID can be estimated to start right after.\n  // This does not modify the current objectNumber;  It must be updated after the newObjects are output.\n  var newAdditionalObject = (API.__private__.newAdditionalObject = function() {\n    var objId = newObjectDeferred();\n    var obj = {\n      objId: objId,\n      content: \"\"\n    };\n    additionalObjects.push(obj);\n    return obj;\n  });\n\n  var rootDictionaryObjId = newObjectDeferred();\n  var resourceDictionaryObjId = newObjectDeferred();\n\n  var getFilters = (API.__private__.getFilters = function() {\n    return filters;\n  });\n\n  var putStream = (API.__private__.putStream = function(options) {\n    options = options || {};\n    var data = options.data || \"\";\n    var filters = options.filters || getFilters();\n    var alreadyAppliedFilters = options.alreadyAppliedFilters || [];\n    var addLength1 = options.addLength1 || false;\n    var valueOfLength1 = data.length;\n\n    var processedData = {};\n    if (filters === true) {\n      filters = [\"FlateEncode\"];\n    }\n    var keyValues = options.additionalKeyValues || [];\n    if (typeof jsPDF.API.processDataByFilters !== \"undefined\") {\n      processedData = jsPDF.API.processDataByFilters(data, filters);\n    } else {\n      processedData = { data: data, reverseChain: [] };\n    }\n    var filterAsString =\n      processedData.reverseChain +\n      (Array.isArray(alreadyAppliedFilters)\n        ? alreadyAppliedFilters.join(\" \")\n        : alreadyAppliedFilters.toString());\n\n    if (processedData.data.length !== 0) {\n      keyValues.push({\n        key: \"Length\",\n        value: processedData.data.length\n      });\n      if (addLength1 === true) {\n        keyValues.push({\n          key: \"Length1\",\n          value: valueOfLength1\n        });\n      }\n    }\n\n    if (filterAsString.length != 0) {\n      if (filterAsString.split(\"/\").length - 1 === 1) {\n        keyValues.push({\n          key: \"Filter\",\n          value: filterAsString\n        });\n      } else {\n        keyValues.push({\n          key: \"Filter\",\n          value: \"[\" + filterAsString + \"]\"\n        });\n\n        for (var j = 0; j < keyValues.length; j += 1) {\n          if (keyValues[j].key === \"DecodeParms\") {\n            var decodeParmsArray = [];\n\n            for (\n              var i = 0;\n              i < processedData.reverseChain.split(\"/\").length - 1;\n              i += 1\n            ) {\n              decodeParmsArray.push(\"null\");\n            }\n\n            decodeParmsArray.push(keyValues[j].value);\n            keyValues[j].value = \"[\" + decodeParmsArray.join(\" \") + \"]\";\n          }\n        }\n      }\n    }\n\n    out(\"<<\");\n    for (var k = 0; k < keyValues.length; k++) {\n      out(\"/\" + keyValues[k].key + \" \" + keyValues[k].value);\n    }\n    out(\">>\");\n    if (processedData.data.length !== 0) {\n      out(\"stream\");\n      out(processedData.data);\n      out(\"endstream\");\n    }\n  });\n\n  var putPage = (API.__private__.putPage = function(page) {\n    var pageNumber = page.number;\n    var data = page.data;\n    var pageObjectNumber = page.objId;\n    var pageContentsObjId = page.contentsObjId;\n\n    newObjectDeferredBegin(pageObjectNumber, true);\n    out(\"<</Type /Page\");\n    out(\"/Parent \" + page.rootDictionaryObjId + \" 0 R\");\n    out(\"/Resources \" + page.resourceDictionaryObjId + \" 0 R\");\n    out(\n      \"/MediaBox [\" +\n        parseFloat(hpf(page.mediaBox.bottomLeftX)) +\n        \" \" +\n        parseFloat(hpf(page.mediaBox.bottomLeftY)) +\n        \" \" +\n        hpf(page.mediaBox.topRightX) +\n        \" \" +\n        hpf(page.mediaBox.topRightY) +\n        \"]\"\n    );\n    if (page.cropBox !== null) {\n      out(\n        \"/CropBox [\" +\n          hpf(page.cropBox.bottomLeftX) +\n          \" \" +\n          hpf(page.cropBox.bottomLeftY) +\n          \" \" +\n          hpf(page.cropBox.topRightX) +\n          \" \" +\n          hpf(page.cropBox.topRightY) +\n          \"]\"\n      );\n    }\n\n    if (page.bleedBox !== null) {\n      out(\n        \"/BleedBox [\" +\n          hpf(page.bleedBox.bottomLeftX) +\n          \" \" +\n          hpf(page.bleedBox.bottomLeftY) +\n          \" \" +\n          hpf(page.bleedBox.topRightX) +\n          \" \" +\n          hpf(page.bleedBox.topRightY) +\n          \"]\"\n      );\n    }\n\n    if (page.trimBox !== null) {\n      out(\n        \"/TrimBox [\" +\n          hpf(page.trimBox.bottomLeftX) +\n          \" \" +\n          hpf(page.trimBox.bottomLeftY) +\n          \" \" +\n          hpf(page.trimBox.topRightX) +\n          \" \" +\n          hpf(page.trimBox.topRightY) +\n          \"]\"\n      );\n    }\n\n    if (page.artBox !== null) {\n      out(\n        \"/ArtBox [\" +\n          hpf(page.artBox.bottomLeftX) +\n          \" \" +\n          hpf(page.artBox.bottomLeftY) +\n          \" \" +\n          hpf(page.artBox.topRightX) +\n          \" \" +\n          hpf(page.artBox.topRightY) +\n          \"]\"\n      );\n    }\n\n    if (typeof page.userUnit === \"number\" && page.userUnit !== 1.0) {\n      out(\"/UserUnit \" + page.userUnit);\n    }\n\n    events.publish(\"putPage\", {\n      objId: pageObjectNumber,\n      pageContext: pagesContext[pageNumber],\n      pageNumber: pageNumber,\n      page: data\n    });\n    out(\"/Contents \" + pageContentsObjId + \" 0 R\");\n    out(\">>\");\n    out(\"endobj\");\n    // Page content\n    var pageContent = data.join(\"\\n\");\n\n    if (apiMode === ApiMode.ADVANCED) {\n      // if the user forgot to switch back to COMPAT mode, we must balance the graphics stack again\n      pageContent += \"\\nQ\";\n    }\n\n    newObjectDeferredBegin(pageContentsObjId, true);\n    putStream({\n      data: pageContent,\n      filters: getFilters(),\n      objectId: pageContentsObjId\n    });\n    out(\"endobj\");\n    return pageObjectNumber;\n  });\n\n  var putPages = (API.__private__.putPages = function() {\n    var n,\n      i,\n      pageObjectNumbers = [];\n\n    for (n = 1; n <= page; n++) {\n      pagesContext[n].objId = newObjectDeferred();\n      pagesContext[n].contentsObjId = newObjectDeferred();\n    }\n\n    for (n = 1; n <= page; n++) {\n      pageObjectNumbers.push(\n        putPage({\n          number: n,\n          data: pages[n],\n          objId: pagesContext[n].objId,\n          contentsObjId: pagesContext[n].contentsObjId,\n          mediaBox: pagesContext[n].mediaBox,\n          cropBox: pagesContext[n].cropBox,\n          bleedBox: pagesContext[n].bleedBox,\n          trimBox: pagesContext[n].trimBox,\n          artBox: pagesContext[n].artBox,\n          userUnit: pagesContext[n].userUnit,\n          rootDictionaryObjId: rootDictionaryObjId,\n          resourceDictionaryObjId: resourceDictionaryObjId\n        })\n      );\n    }\n    newObjectDeferredBegin(rootDictionaryObjId, true);\n    out(\"<</Type /Pages\");\n    var kids = \"/Kids [\";\n    for (i = 0; i < page; i++) {\n      kids += pageObjectNumbers[i] + \" 0 R \";\n    }\n    out(kids + \"]\");\n    out(\"/Count \" + page);\n    out(\">>\");\n    out(\"endobj\");\n    events.publish(\"postPutPages\");\n  });\n\n  var putXobjectDict = function() {\n    out(\"/XObject <<\");\n    for (var xObjectKey in renderTargets) {\n      if (\n        renderTargets.hasOwnProperty(xObjectKey) &&\n        renderTargets[xObjectKey].objectNumber >= 0\n      ) {\n        out(\n          \"/\" +\n            xObjectKey +\n            \" \" +\n            renderTargets[xObjectKey].objectNumber +\n            \" 0 R\"\n        );\n      }\n    }\n\n    // Loop through images, or other data objects\n    events.publish(\"putXobjectDict\");\n    out(\">>\");\n  };\n\n  var putResourceDictionary = function(objectIds) {\n    newObjectDeferredBegin(objectIds.resourcesOid, true);\n    out(\"<<\");\n    out(\"/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]\");\n    putXobjectDict();\n    out(\">>\");\n    out(\"endobj\");\n  };\n\n  var putResources = function() {\n    // FormObjects, Patterns etc. might use other FormObjects/Patterns/Images\n    // which means their resource dictionaries must contain the already resolved\n    // object ids. For this reason we defer the serialization of the resource\n    // dicts until all objects have been serialized and have object ids.\n    //\n    // In order to prevent cyclic dependencies (which Adobe Reader doesn't like),\n    // we only put all oids that are smaller than the oid of the object the\n    // resource dict belongs to. This is correct behavior, since the streams\n    // may only use other objects that have already been defined and thus appear\n    // earlier in their respective collection.\n    // Currently, this only affects tiling patterns, but a (more) correct\n    // implementation of FormObjects would also define their own resource dicts.\n    var deferredResourceDictionaryIds = [];\n    events.publish(\"putResources\");\n    deferredResourceDictionaryIds.forEach(putResourceDictionary);\n    putResourceDictionary({\n      resourcesOid: resourceDictionaryObjId,\n      objectOid: Number.MAX_SAFE_INTEGER // output all objects\n    });\n    events.publish(\"postPutResources\");\n  };\n\n  var SAFE = function __safeCall(fn) {\n    fn.foo = function __safeCallWrapper() {\n      try {\n        return fn.apply(this, arguments);\n      } catch (e) {\n        var stack = e.stack || \"\";\n        if (~stack.indexOf(\" at \")) stack = stack.split(\" at \")[1];\n        var m =\n          \"Error in function \" +\n          stack.split(\"\\n\")[0].split(\"<\")[0] +\n          \": \" +\n          e.message;\n        if (globalObject.console) {\n          globalObject.console.error(m, e);\n          if (globalObject.alert) alert(m);\n        } else {\n          throw new Error(m);\n        }\n      }\n    };\n    fn.foo.bar = fn;\n    return fn.foo;\n  };\n\n  var to8bitStream = function(text, flags) {\n    /**\n     * PDF 1.3 spec:\n     * \"For text strings encoded in Unicode, the first two bytes must be 254 followed by\n     * 255, representing the Unicode byte order marker, U+FEFF. (This sequence conflicts\n     * with the PDFDocEncoding character sequence thorn ydieresis, which is unlikely\n     * to be a meaningful beginning of a word or phrase.) The remainder of the\n     * string consists of Unicode character codes, according to the UTF-16 encoding\n     * specified in the Unicode standard, version 2.0. Commonly used Unicode values\n     * are represented as 2 bytes per character, with the high-order byte appearing first\n     * in the string.\"\n     *\n     * In other words, if there are chars in a string with char code above 255, we\n     * recode the string to UCS2 BE - string doubles in length and BOM is prepended.\n     *\n     * HOWEVER!\n     * Actual *content* (body) text (as opposed to strings used in document properties etc)\n     * does NOT expect BOM. There, it is treated as a literal GID (Glyph ID)\n     *\n     * Because of Adobe's focus on \"you subset your fonts!\" you are not supposed to have\n     * a font that maps directly Unicode (UCS2 / UTF16BE) code to font GID, but you could\n     * fudge it with \"Identity-H\" encoding and custom CIDtoGID map that mimics Unicode\n     * code page. There, however, all characters in the stream are treated as GIDs,\n     * including BOM, which is the reason we need to skip BOM in content text (i.e. that\n     * that is tied to a font).\n     *\n     * To signal this \"special\" PDFEscape / to8bitStream handling mode,\n     * API.text() function sets (unless you overwrite it with manual values\n     * given to API.text(.., flags) )\n     * flags.autoencode = true\n     * flags.noBOM = true\n     *\n     * ===================================================================================\n     * `flags` properties relied upon:\n     *   .sourceEncoding = string with encoding label.\n     *                     \"Unicode\" by default. = encoding of the incoming text.\n     *                     pass some non-existing encoding name\n     *                     (ex: 'Do not touch my strings! I know what I am doing.')\n     *                     to make encoding code skip the encoding step.\n     *   .outputEncoding = Either valid PDF encoding name\n     *                     (must be supported by jsPDF font metrics, otherwise no encoding)\n     *                     or a JS object, where key = sourceCharCode, value = outputCharCode\n     *                     missing keys will be treated as: sourceCharCode === outputCharCode\n     *   .noBOM\n     *       See comment higher above for explanation for why this is important\n     *   .autoencode\n     *       See comment higher above for explanation for why this is important\n     */\n\n    var i,\n      l,\n      sourceEncoding,\n      encodingBlock,\n      outputEncoding,\n      newtext,\n      isUnicode,\n      ch,\n      bch;\n\n    flags = flags || {};\n    sourceEncoding = flags.sourceEncoding || \"Unicode\";\n    outputEncoding = flags.outputEncoding;\n\n    // This 'encoding' section relies on font metrics format\n    // attached to font objects by, among others,\n    // \"Willow Systems' standard_font_metrics plugin\"\n    // see jspdf.plugin.standard_font_metrics.js for format\n    // of the font.metadata.encoding Object.\n    // It should be something like\n    //   .encoding = {'codePages':['WinANSI....'], 'WinANSI...':{code:code, ...}}\n    //   .widths = {0:width, code:width, ..., 'fof':divisor}\n    //   .kerning = {code:{previous_char_code:shift, ..., 'fof':-divisor},...}\n    if (\n      (flags.autoencode || outputEncoding) &&\n      fonts[activeFontKey].metadata &&\n      fonts[activeFontKey].metadata[sourceEncoding] &&\n      fonts[activeFontKey].metadata[sourceEncoding].encoding\n    ) {\n      encodingBlock = fonts[activeFontKey].metadata[sourceEncoding].encoding;\n\n      // each font has default encoding. Some have it clearly defined.\n      if (!outputEncoding && fonts[activeFontKey].encoding) {\n        outputEncoding = fonts[activeFontKey].encoding;\n      }\n\n      // Hmmm, the above did not work? Let's try again, in different place.\n      if (!outputEncoding && encodingBlock.codePages) {\n        outputEncoding = encodingBlock.codePages[0]; // let's say, first one is the default\n      }\n\n      if (typeof outputEncoding === \"string\") {\n        outputEncoding = encodingBlock[outputEncoding];\n      }\n      // we want output encoding to be a JS Object, where\n      // key = sourceEncoding's character code and\n      // value = outputEncoding's character code.\n      if (outputEncoding) {\n        isUnicode = false;\n        newtext = [];\n        for (i = 0, l = text.length; i < l; i++) {\n          ch = outputEncoding[text.charCodeAt(i)];\n          if (ch) {\n            newtext.push(String.fromCharCode(ch));\n          } else {\n            newtext.push(text[i]);\n          }\n\n          // since we are looping over chars anyway, might as well\n          // check for residual unicodeness\n          if (newtext[i].charCodeAt(0) >> 8) {\n            /* more than 255 */\n            isUnicode = true;\n          }\n        }\n        text = newtext.join(\"\");\n      }\n    }\n\n    i = text.length;\n    // isUnicode may be set to false above. Hence the triple-equal to undefined\n    while (isUnicode === undefined && i !== 0) {\n      if (text.charCodeAt(i - 1) >> 8) {\n        /* more than 255 */\n        isUnicode = true;\n      }\n      i--;\n    }\n    if (!isUnicode) {\n      return text;\n    }\n\n    newtext = flags.noBOM ? [] : [254, 255];\n    for (i = 0, l = text.length; i < l; i++) {\n      ch = text.charCodeAt(i);\n      bch = ch >> 8; // divide by 256\n      if (bch >> 8) {\n        /* something left after dividing by 256 second time */\n        throw new Error(\n          \"Character at position \" +\n            i +\n            \" of string '\" +\n            text +\n            \"' exceeds 16bits. Cannot be encoded into UCS-2 BE\"\n        );\n      }\n      newtext.push(bch);\n      newtext.push(ch - (bch << 8));\n    }\n    return String.fromCharCode.apply(undefined, newtext);\n  };\n\n  var pdfEscape = (API.__private__.pdfEscape = API.pdfEscape = function(\n    text,\n    flags\n  ) {\n    /**\n     * Replace '/', '(', and ')' with pdf-safe versions\n     *\n     * Doing to8bitStream does NOT make this PDF display unicode text. For that\n     * we also need to reference a unicode font and embed it - royal pain in the rear.\n     *\n     * There is still a benefit to to8bitStream - PDF simply cannot handle 16bit chars,\n     * which JavaScript Strings are happy to provide. So, while we still cannot display\n     * 2-byte characters property, at least CONDITIONALLY converting (entire string containing)\n     * 16bit chars to (USC-2-BE) 2-bytes per char + BOM streams we ensure that entire PDF\n     * is still parseable.\n     * This will allow immediate support for unicode in document properties strings.\n     */\n    return to8bitStream(text, flags)\n      .replace(/\\\\/g, \"\\\\\\\\\")\n      .replace(/\\(/g, \"\\\\(\")\n      .replace(/\\)/g, \"\\\\)\");\n  });\n\n  var beginPage = (API.__private__.beginPage = function(format) {\n    pages[++page] = [];\n    pagesContext[page] = {\n      objId: 0,\n      contentsObjId: 0,\n      userUnit: Number(userUnit),\n      artBox: null,\n      bleedBox: null,\n      cropBox: null,\n      trimBox: null,\n      mediaBox: {\n        bottomLeftX: 0,\n        bottomLeftY: 0,\n        topRightX: Number(format[0]),\n        topRightY: Number(format[1])\n      }\n    };\n    _setPage(page);\n    setOutputDestination(pages[currentPage]);\n  });\n\n  var _addPage = function(parmFormat) {\n    var width, height;\n\n    if (Array.isArray(parmFormat)) {\n      width = parmFormat[0] * scaleFactor;\n      height = parmFormat[1] * scaleFactor;\n    }\n\n    if (isNaN(width)) {\n      width = format[0];\n      height = format[1];\n    }\n\n    if (width > 14400 || height > 14400) {\n      console.warn(\n        \"A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400\"\n      );\n      width = Math.min(14400, width);\n      height = Math.min(14400, height);\n    }\n\n    format = [width, height];\n\n    switch (orientation.substr(0, 1)) {\n      case \"l\":\n        if (height > width) {\n          format = [height, width];\n        }\n        break;\n      case \"p\":\n        if (width > height) {\n          format = [height, width];\n        }\n        break;\n    }\n\n    beginPage(format);\n    events.publish(\"addPage\", {\n      pageNumber: page\n    });\n  };\n\n  var _setPage = function(n) {\n    if (n > 0 && n <= page) {\n      currentPage = n;\n    }\n  };\n\n  var getNumberOfPages = (API.__private__.getNumberOfPages = API.getNumberOfPages = function() {\n    return pages.length - 1;\n  });\n\n  var putInfo = (API.__private__.putInfo = function() {\n    out(\"<<\");\n    out(\"/Producer (\" + pdfEscape(\"jsPDF \" + jsPDF.version) + \")\");\n    for (var key in documentProperties) {\n      if (documentProperties.hasOwnProperty(key) && documentProperties[key]) {\n        out(\n          \"/\" +\n            key.substr(0, 1).toUpperCase() +\n            key.substr(1) +\n            \" (\" +\n            pdfEscape(documentProperties[key]) +\n            \")\"\n        );\n      }\n    }\n    out(\"/CreationDate (\" + pdfEscape(creationDate) + \")\");\n    out(\">>\");\n    out(\"endobj\");\n  });\n\n  var putCatalog = (API.__private__.putCatalog = function(options) {\n    options = options || {};\n    var tmpRootDictionaryObjId =\n      options.rootDictionaryObjId || rootDictionaryObjId;\n    newObject();\n    out(\"<<\");\n    out(\"/Type /Catalog\");\n    out(\"/Pages \" + tmpRootDictionaryObjId + \" 0 R\");\n    // PDF13ref Section 7.2.1\n    if (!layoutMode) layoutMode = \"continuous\";\n    switch (layoutMode) {\n      case \"continuous\":\n        out(\"/PageLayout /OneColumn\");\n        break;\n      case \"single\":\n        out(\"/PageLayout /SinglePage\");\n        break;\n      case \"two\":\n      case \"twoleft\":\n        out(\"/PageLayout /TwoColumnLeft\");\n        break;\n      case \"tworight\":\n        out(\"/PageLayout /TwoColumnRight\");\n        break;\n    }\n    if (pageMode) {\n      /**\n       * A name object specifying how the document should be displayed when opened:\n       * UseNone      : Neither document outline nor thumbnail images visible -- DEFAULT\n       * UseOutlines  : Document outline visible\n       * UseThumbs    : Thumbnail images visible\n       * FullScreen   : Full-screen mode, with no menu bar, window controls, or any other window visible\n       */\n      out(\"/PageMode /\" + pageMode);\n    }\n    events.publish(\"putCatalog\");\n    out(\">>\");\n    out(\"endobj\");\n  });\n\n  var putTrailer = (API.__private__.putTrailer = function() {\n    out(\"trailer\");\n    out(\"<<\");\n    out(\"/Size \" + (objectNumber + 1));\n    // Root and Info must be the last and second last objects written respectively\n    out(\"/Root \" + objectNumber + \" 0 R\");\n    out(\"/Info \" + (objectNumber - 1) + \" 0 R\");\n    out(\"/ID [ <\" + fileId + \"> <\" + fileId + \"> ]\");\n    out(\">>\");\n  });\n\n  var putHeader = (API.__private__.putHeader = function() {\n    out(\"%PDF-\" + pdfVersion);\n    out(\"%\\xBA\\xDF\\xAC\\xE0\");\n  });\n\n  var putXRef = (API.__private__.putXRef = function() {\n    var p = \"0000000000\";\n\n    out(\"xref\");\n    out(\"0 \" + (objectNumber + 1));\n    out(\"0000000000 65535 f \");\n    for (var i = 1; i <= objectNumber; i++) {\n      var offset = offsets[i];\n      if (typeof offset === \"function\") {\n        out((p + offsets[i]()).slice(-10) + \" 00000 n \");\n      } else {\n        if (typeof offsets[i] !== \"undefined\") {\n          out((p + offsets[i]).slice(-10) + \" 00000 n \");\n        } else {\n          out(\"0000000000 00000 n \");\n        }\n      }\n    }\n  });\n\n  var buildDocument = (API.__private__.buildDocument = function() {\n    resetDocument();\n    setOutputDestination(content);\n\n    events.publish(\"buildDocument\");\n\n    putHeader();\n    putPages();\n    putResources();\n    putInfo();\n    putCatalog();\n\n    var offsetOfXRef = contentLength;\n    putXRef();\n    putTrailer();\n    out(\"startxref\");\n    out(\"\" + offsetOfXRef);\n    out(\"%%EOF\");\n\n    setOutputDestination(pages[currentPage]);\n\n    return content.join(\"\\n\");\n  });\n\n  /**\n   * Generates the PDF document.\n   *\n   * If `type` argument is undefined, output is raw body of resulting PDF returned as a string.\n   *\n   * @param {string} type A string identifying one of the possible output types.<br/>\n   *                      Possible values are: <br/>\n   *                          'arraybuffer' -> (ArrayBuffer)<br/>\n   *                          'blob' -> (Blob)<br/>\n   *                          'bloburi'/'bloburl' -> (string)<br/>\n   *                          'datauristring'/'dataurlstring' -> (string)<br/>\n   *                          'datauri'/'dataurl' -> (undefined) -> change location to generated datauristring/dataurlstring<br/>\n   *                          'dataurlnewwindow' -> (window | null | undefined) throws error if global isn't a window object(node)<br/>\n   *                          'pdfobjectnewwindow' -> (window | null) throws error if global isn't a window object(node)<br/>\n   *                          'pdfjsnewwindow' -> (wind | null)\n   * @param {Object|string} options An object providing some additional signalling to PDF generator.<br/>\n   *                                Possible options are 'filename'.<br/>\n   *                                A string can be passed instead of {filename:string} and defaults to 'generated.pdf'\n   * @function\n   * @instance\n   * @returns {string|window|ArrayBuffer|Blob|jsPDF|null|undefined}\n   * @memberof jsPDF#\n   * @name output\n   */\n  var output = (API.output = API.__private__.output = SAFE(function output(\n    type,\n    options\n  ) {\n    options = options || {};\n\n    if (typeof options === \"string\") {\n      options = {\n        filename: options\n      };\n    } else {\n      options.filename = options.filename || \"generated.pdf\";\n    }\n\n    switch (type) {\n      case \"arraybuffer\":\n        return getArrayBuffer(buildDocument());\n      case \"datauristring\":\n      case \"dataurlstring\":\n        var dataURI = \"\";\n        var pdfDocument = buildDocument();\n        try {\n          dataURI = btoa(pdfDocument);\n        } catch (e) {\n          dataURI = btoa(unescape(encodeURIComponent(pdfDocument)));\n        }\n        return (\n          \"data:application/pdf;filename=\" +\n          options.filename +\n          \";base64,\" +\n          dataURI\n        );\n      default:\n        return null;\n    }\n  }));\n\n  /**\n   * Used to see if a supplied hotfix was requested when the pdf instance was created.\n   * @param {string} hotfixName - The name of the hotfix to check.\n   * @returns {boolean}\n   */\n  var hasHotfix = function(hotfixName) {\n    return (\n      Array.isArray(hotfixes) === true && hotfixes.indexOf(hotfixName) > -1\n    );\n  };\n\n  switch (unit) {\n    case \"pt\":\n      scaleFactor = 1;\n      break;\n    case \"mm\":\n      scaleFactor = 72 / 25.4;\n      break;\n    case \"cm\":\n      scaleFactor = 72 / 2.54;\n      break;\n    case \"in\":\n      scaleFactor = 72;\n      break;\n    case \"px\":\n      if (hasHotfix(\"px_scaling\") == true) {\n        scaleFactor = 72 / 96;\n      } else {\n        scaleFactor = 96 / 72;\n      }\n      break;\n    case \"pc\":\n      scaleFactor = 12;\n      break;\n    case \"em\":\n      scaleFactor = 12;\n      break;\n    case \"ex\":\n      scaleFactor = 6;\n      break;\n    default:\n      if (typeof unit === \"number\") {\n        scaleFactor = unit;\n      } else {\n        throw new Error(\"Invalid unit: \" + unit);\n      }\n  }\n\n  setCreationDate();\n  setFileId();\n\n  /**\n   * Adds (and transfers the focus to) new page to the PDF document.\n   * @param format {String/Array} The format of the new page. Can be: <ul><li>a0 - a10</li><li>b0 - b10</li><li>c0 - c10</li><li>dl</li><li>letter</li><li>government-letter</li><li>legal</li><li>junior-legal</li><li>ledger</li><li>tabloid</li><li>credit-card</li></ul><br />\n   * Default is \"a4\". If you want to use your own format just pass instead of one of the above predefined formats the size as an number-array, e.g. [595.28, 841.89]\n   * @param orientation {string} Orientation of the new page. Possible values are \"portrait\" or \"landscape\" (or shortcuts \"p\" (Default), \"l\").\n   * @function\n   * @instance\n   * @returns {jsPDF}\n   *\n   * @memberof jsPDF#\n   * @name addPage\n   */\n  API.addPage = function() {\n    _addPage.apply(this, arguments);\n    return this;\n  };\n\n  var isValidStyle = (API.__private__.isValidStyle = function(style) {\n    var validStyleVariants = [\n      undefined,\n      null,\n      \"S\",\n      \"D\",\n      \"F\",\n      \"DF\",\n      \"FD\",\n      \"f\",\n      \"f*\",\n      \"B\",\n      \"B*\",\n      \"n\"\n    ];\n    var result = false;\n    if (validStyleVariants.indexOf(style) !== -1) {\n      result = true;\n    }\n    return result;\n  });\n\n  /**\n   * Close the current path. The PDF \"h\" operator.\n   * @name close\n   * @function\n   * @instance\n   * @returns {jsPDF}\n   * @memberof jsPDF#\n   */\n  var close = (API.close = function() {\n    out(\"h\");\n    return this;\n  });\n\n  var getHorizontalCoordinate = (API.__private__.getHorizontalCoordinate = function(\n    value\n  ) {\n    return scale(value);\n  });\n\n  var getVerticalCoordinate = (API.__private__.getVerticalCoordinate = function(\n    value\n  ) {\n    if (apiMode === ApiMode.ADVANCED) {\n      return value;\n    } else {\n      var pageHeight =\n        pagesContext[currentPage].mediaBox.topRightY -\n        pagesContext[currentPage].mediaBox.bottomLeftY;\n      return pageHeight - scale(value);\n    }\n  });\n\n  var getHorizontalCoordinateString = (API.__private__.getHorizontalCoordinateString = API.getHorizontalCoordinateString = function(\n    value\n  ) {\n    return hpf(getHorizontalCoordinate(value));\n  });\n\n  var getVerticalCoordinateString = (API.__private__.getVerticalCoordinateString = API.getVerticalCoordinateString = function(\n    value\n  ) {\n    return hpf(getVerticalCoordinate(value));\n  });\n\n  // applying plugins (more methods) ON TOP of built-in API.\n  // this is intentional as we allow plugins to override\n  // built-ins\n  for (var plugin in jsPDF.API) {\n    if (jsPDF.API.hasOwnProperty(plugin)) {\n      if (plugin === \"events\" && jsPDF.API.events.length) {\n        (function(events, newEvents) {\n          // jsPDF.API.events is a JS Array of Arrays\n          // where each Array is a pair of event name, handler\n          // Events were added by plugins to the jsPDF instantiator.\n          // These are always added to the new instance and some ran\n          // during instantiation.\n          var eventname, handler_and_args, i;\n\n          for (i = newEvents.length - 1; i !== -1; i--) {\n            // subscribe takes 3 args: 'topic', function, runonce_flag\n            // if undefined, runonce is false.\n            // users can attach callback directly,\n            // or they can attach an array with [callback, runonce_flag]\n            // that's what the \"apply\" magic is for below.\n            eventname = newEvents[i][0];\n            handler_and_args = newEvents[i][1];\n            events.subscribe.apply(\n              events,\n              [eventname].concat(\n                typeof handler_and_args === \"function\"\n                  ? [handler_and_args]\n                  : handler_and_args\n              )\n            );\n          }\n        })(events, jsPDF.API.events);\n      } else {\n        API[plugin] = jsPDF.API[plugin];\n      }\n    }\n  }\n  /**\n   * Object exposing internal API to plugins\n   * @public\n   * @ignore\n   */\n  API.internal = {\n    pdfEscape: pdfEscape,\n    write: write,\n    getHorizontalCoordinate: getHorizontalCoordinate,\n    getVerticalCoordinate: getVerticalCoordinate,\n    getCoordinateString: getHorizontalCoordinateString,\n    getVerticalCoordinateString: getVerticalCoordinateString,\n    collections: {},\n    newObject: newObject,\n    newAdditionalObject: newAdditionalObject,\n    newObjectDeferred: newObjectDeferred,\n    newObjectDeferredBegin: newObjectDeferredBegin,\n    getFilters: getFilters,\n    putStream: putStream,\n    events: events,\n    scaleFactor: scaleFactor,\n    output: output,\n    getNumberOfPages: getNumberOfPages,\n    pages: pages,\n    out: out,\n    getPDFVersion: getPdfVersion,\n    hasHotfix: hasHotfix //Expose the hasHotfix check so plugins can also check them.\n  };\n\n  activeFontKey = \"F1\";\n  _addPage(format, orientation);\n\n  events.publish(\"initialized\");\n  return API;\n}\n\n/**\n * jsPDF.API is a STATIC property of jsPDF class.\n * jsPDF.API is an object you can add methods and properties to.\n * The methods / properties you add will show up in new jsPDF objects.\n *\n * One property is prepopulated. It is the 'events' Object. Plugin authors can add topics,\n * callbacks to this object. These will be reassigned to all new instances of jsPDF.\n *\n * @static\n * @public\n * @memberof jsPDF#\n * @name API\n *\n * @example\n * jsPDF.API.mymethod = function(){\n *   // 'this' will be ref to internal API object. see jsPDF source\n *   // , so you can refer to built-in methods like so:\n *   //     this.line(....)\n *   //     this.text(....)\n * }\n * var pdfdoc = new jsPDF()\n * pdfdoc.mymethod() // <- !!!!!!\n */\njsPDF.API = {\n  events: []\n};\n/**\n * The version of jsPDF.\n * @name version\n * @type {string}\n * @memberof jsPDF#\n */\njsPDF.version = \"0.0.0\";\n\nexport { jsPDF };\nexport default jsPDF;\n","/** @license\n * jsPDF addImage plugin\n * Copyright (c) 2012 Jason Siefken, https://github.com/siefkenj/\n *               2013 Chris Dowling, https://github.com/gingerchris\n *               2013 Trinh Ho, https://github.com/ineedfat\n *               2013 Edwin Alejandro Perez, https://github.com/eaparango\n *               2013 Norah Smith, https://github.com/burnburnrocket\n *               2014 Diego Casorran, https://github.com/diegocr\n *               2014 James Robb, https://github.com/jamesbrobb\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n/**\n * @name addImage\n * @module\n */\n\nimport { jsPDF } from \"../jspdf.js\";\nimport { atob, btoa } from \"../libs/AtobBtoa.js\";\n\n(function(jsPDFAPI) {\n  \"use strict\";\n\n  var namespace = \"addImage_\";\n  jsPDFAPI.__addimage__ = {};\n\n  // Heuristic selection of a good batch for large array .apply. Not limiting make the call overflow.\n  // With too small batch iteration will be slow as more calls are made,\n  // higher values cause larger and slower garbage collection.\n  var ARRAY_APPLY_BATCH = 8192;\n  // Image functionality ported from pdf.js\n  var putImage = function(image) {\n    var out = this.internal.write;\n    var putStream = this.internal.putStream;\n    var getFilters = this.internal.getFilters;\n\n    var filter = getFilters();\n    while (filter.indexOf(\"FlateEncode\") !== -1) {\n      filter.splice(filter.indexOf(\"FlateEncode\"), 1);\n    }\n\n    image.objectId = this.internal.newObject();\n\n    var additionalKeyValues = [];\n    additionalKeyValues.push({ key: \"Type\", value: \"/XObject\" });\n    additionalKeyValues.push({ key: \"Subtype\", value: \"/Image\" });\n    additionalKeyValues.push({ key: \"Width\", value: image.width });\n    additionalKeyValues.push({ key: \"Height\", value: image.height });\n\n    if (image.colorSpace === color_spaces.INDEXED) {\n      additionalKeyValues.push({\n        key: \"ColorSpace\",\n        value:\n          \"[/Indexed /DeviceRGB \" +\n          // if an indexed png defines more than one colour with transparency, we've created a sMask\n          (image.palette.length / 3 - 1) +\n          \" \" +\n          (\"sMask\" in image && typeof image.sMask !== \"undefined\"\n            ? image.objectId + 2\n            : image.objectId + 1) +\n          \" 0 R]\"\n      });\n    } else {\n      additionalKeyValues.push({\n        key: \"ColorSpace\",\n        value: \"/\" + image.colorSpace\n      });\n      if (image.colorSpace === color_spaces.DEVICE_CMYK) {\n        additionalKeyValues.push({ key: \"Decode\", value: \"[1 0 1 0 1 0 1 0]\" });\n      }\n    }\n    additionalKeyValues.push({\n      key: \"BitsPerComponent\",\n      value: image.bitsPerComponent\n    });\n    if (\n      \"decodeParameters\" in image &&\n      typeof image.decodeParameters !== \"undefined\"\n    ) {\n      additionalKeyValues.push({\n        key: \"DecodeParms\",\n        value: \"<<\" + image.decodeParameters + \">>\"\n      });\n    }\n    if (\"transparency\" in image && Array.isArray(image.transparency)) {\n      var transparency = \"\",\n        i = 0,\n        len = image.transparency.length;\n      for (; i < len; i++)\n        transparency +=\n          image.transparency[i] + \" \" + image.transparency[i] + \" \";\n\n      additionalKeyValues.push({\n        key: \"Mask\",\n        value: \"[\" + transparency + \"]\"\n      });\n    }\n    if (typeof image.sMask !== \"undefined\") {\n      additionalKeyValues.push({\n        key: \"SMask\",\n        value: image.objectId + 1 + \" 0 R\"\n      });\n    }\n\n    var alreadyAppliedFilters =\n      typeof image.filter !== \"undefined\" ? [\"/\" + image.filter] : undefined;\n\n    putStream({\n      data: image.data,\n      additionalKeyValues: additionalKeyValues,\n      alreadyAppliedFilters: alreadyAppliedFilters,\n      objectId: image.objectId\n    });\n\n    out(\"endobj\");\n\n    // Soft mask\n    if (\"sMask\" in image && typeof image.sMask !== \"undefined\") {\n      var decodeParameters =\n        \"/Predictor \" +\n        image.predictor +\n        \" /Colors 1 /BitsPerComponent \" +\n        image.bitsPerComponent +\n        \" /Columns \" +\n        image.width;\n      var sMask = {\n        width: image.width,\n        height: image.height,\n        colorSpace: \"DeviceGray\",\n        bitsPerComponent: image.bitsPerComponent,\n        decodeParameters: decodeParameters,\n        data: image.sMask\n      };\n      if (\"filter\" in image) {\n        sMask.filter = image.filter;\n      }\n      putImage.call(this, sMask);\n    }\n\n    //Palette\n    if (image.colorSpace === color_spaces.INDEXED) {\n      var objId = this.internal.newObject();\n      //out('<< /Filter / ' + img['f'] +' /Length ' + img['pal'].length + '>>');\n      //putStream(zlib.compress(img['pal']));\n      putStream({\n        data: arrayBufferToBinaryString(new Uint8Array(image.palette)),\n        objectId: objId\n      });\n      out(\"endobj\");\n    }\n  };\n  var putResourcesCallback = function() {\n    var images = this.internal.collections[namespace + \"images\"];\n    for (var i in images) {\n      putImage.call(this, images[i]);\n    }\n  };\n  var putXObjectsDictCallback = function() {\n    var images = this.internal.collections[namespace + \"images\"],\n      out = this.internal.write,\n      image;\n    for (var i in images) {\n      image = images[i];\n      out(\"/I\" + image.index, image.objectId, \"0\", \"R\");\n    }\n  };\n\n  var checkCompressValue = function(value) {\n    if (value && typeof value === \"string\") value = value.toUpperCase();\n    return value in jsPDFAPI.image_compression ? value : image_compression.NONE;\n  };\n\n  var initialize = function() {\n    if (!this.internal.collections[namespace + \"images\"]) {\n      this.internal.collections[namespace + \"images\"] = {};\n      this.internal.events.subscribe(\"putResources\", putResourcesCallback);\n      this.internal.events.subscribe(\"putXobjectDict\", putXObjectsDictCallback);\n    }\n  };\n\n  var getImages = function() {\n    var images = this.internal.collections[namespace + \"images\"];\n    initialize.call(this);\n    return images;\n  };\n  var getImageIndex = function() {\n    return Object.keys(this.internal.collections[namespace + \"images\"]).length;\n  };\n  var notDefined = function(value) {\n    return typeof value === \"undefined\" || value === null || value.length === 0;\n  };\n  var generateAliasFromImageData = function(imageData) {\n    if (typeof imageData === \"string\" || isArrayBufferView(imageData)) {\n      return sHashCode(imageData);\n    } else if (isArrayBufferView(imageData.data)) {\n      return sHashCode(imageData.data);\n    }\n\n    return null;\n  };\n\n  var isImageTypeSupported = function(type) {\n    return typeof jsPDFAPI[\"process\" + type.toUpperCase()] === \"function\";\n  };\n\n  var checkImagesForAlias = function(alias) {\n    var images = this.internal.collections[namespace + \"images\"];\n    if (images) {\n      for (var e in images) {\n        if (alias === images[e].alias) {\n          return images[e];\n        }\n      }\n    }\n  };\n\n  var determineWidthAndHeight = function(width, height, image) {\n    if (!width && !height) {\n      width = -96;\n      height = -96;\n    }\n    if (width < 0) {\n      width = (-1 * image.width * 72) / width / this.internal.scaleFactor;\n    }\n    if (height < 0) {\n      height = (-1 * image.height * 72) / height / this.internal.scaleFactor;\n    }\n    if (width === 0) {\n      width = (height * image.width) / image.height;\n    }\n    if (height === 0) {\n      height = (width * image.height) / image.width;\n    }\n\n    return [width, height];\n  };\n\n  var writeImageToPDF = function(x, y, width, height, image, rotation) {\n    var dims = determineWidthAndHeight.call(this, width, height, image),\n      coord = this.internal.getCoordinateString,\n      vcoord = this.internal.getVerticalCoordinateString;\n\n    var images = getImages.call(this);\n\n    width = dims[0];\n    height = dims[1];\n    images[image.index] = image;\n\n    if (rotation) {\n      rotation *= Math.PI / 180;\n      var c = Math.cos(rotation);\n      var s = Math.sin(rotation);\n      //like in pdf Reference do it 4 digits instead of 2\n      var f4 = function(number) {\n        return number.toFixed(4);\n      };\n      var rotationTransformationMatrix = [\n        f4(c),\n        f4(s),\n        f4(s * -1),\n        f4(c),\n        0,\n        0,\n        \"cm\"\n      ];\n    }\n    this.internal.write(\"q\"); //Save graphics state\n    if (rotation) {\n      this.internal.write(\n        [1, \"0\", \"0\", 1, coord(x), vcoord(y + height), \"cm\"].join(\" \")\n      ); //Translate\n      this.internal.write(rotationTransformationMatrix.join(\" \")); //Rotate\n      this.internal.write(\n        [coord(width), \"0\", \"0\", coord(height), \"0\", \"0\", \"cm\"].join(\" \")\n      ); //Scale\n    } else {\n      this.internal.write(\n        [\n          coord(width),\n          \"0\",\n          \"0\",\n          coord(height),\n          coord(x),\n          vcoord(y + height),\n          \"cm\"\n        ].join(\" \")\n      ); //Translate and Scale\n    }\n\n    if (this.isAdvancedAPI()) {\n      // draw image bottom up when in \"advanced\" API mode\n      this.internal.write([1, 0, 0, -1, 0, 0, \"cm\"].join(\" \"));\n    }\n\n    this.internal.write(\"/I\" + image.index + \" Do\"); //Paint Image\n    this.internal.write(\"Q\"); //Restore graphics state\n  };\n\n  /**\n   * COLOR SPACES\n   */\n  var color_spaces = (jsPDFAPI.color_spaces = {\n    DEVICE_RGB: \"DeviceRGB\",\n    DEVICE_GRAY: \"DeviceGray\",\n    DEVICE_CMYK: \"DeviceCMYK\",\n    CAL_GREY: \"CalGray\",\n    CAL_RGB: \"CalRGB\",\n    LAB: \"Lab\",\n    ICC_BASED: \"ICCBased\",\n    INDEXED: \"Indexed\",\n    PATTERN: \"Pattern\",\n    SEPARATION: \"Separation\",\n    DEVICE_N: \"DeviceN\"\n  });\n\n  /**\n   * DECODE METHODS\n   */\n  jsPDFAPI.decode = {\n    DCT_DECODE: \"DCTDecode\",\n    FLATE_DECODE: \"FlateDecode\",\n    LZW_DECODE: \"LZWDecode\",\n    JPX_DECODE: \"JPXDecode\",\n    JBIG2_DECODE: \"JBIG2Decode\",\n    ASCII85_DECODE: \"ASCII85Decode\",\n    ASCII_HEX_DECODE: \"ASCIIHexDecode\",\n    RUN_LENGTH_DECODE: \"RunLengthDecode\",\n    CCITT_FAX_DECODE: \"CCITTFaxDecode\"\n  };\n\n  /**\n   * IMAGE COMPRESSION TYPES\n   */\n  var image_compression = (jsPDFAPI.image_compression = {\n    NONE: \"NONE\",\n    FAST: \"FAST\",\n    MEDIUM: \"MEDIUM\",\n    SLOW: \"SLOW\"\n  });\n\n  /**\n   * @name sHashCode\n   * @function\n   * @param {string} data\n   * @returns {string}\n   */\n  var sHashCode = (jsPDFAPI.__addimage__.sHashCode = function(data) {\n    var hash = 0,\n      i,\n      len;\n\n    if (typeof data === \"string\") {\n      len = data.length;\n      for (i = 0; i < len; i++) {\n        hash = (hash << 5) - hash + data.charCodeAt(i);\n        hash |= 0; // Convert to 32bit integer\n      }\n    } else if (isArrayBufferView(data)) {\n      len = data.byteLength / 2;\n      for (i = 0; i < len; i++) {\n        hash = (hash << 5) - hash + data[i];\n        hash |= 0; // Convert to 32bit integer\n      }\n    }\n    return hash;\n  });\n\n  /**\n   * Validates if given String is a valid Base64-String\n   *\n   * @name validateStringAsBase64\n   * @public\n   * @function\n   * @param {String} possible Base64-String\n   *\n   * @returns {boolean}\n   */\n  var validateStringAsBase64 = (jsPDFAPI.__addimage__.validateStringAsBase64 = function(\n    possibleBase64String\n  ) {\n    possibleBase64String = possibleBase64String || \"\";\n    possibleBase64String.toString().trim();\n\n    var result = true;\n\n    if (possibleBase64String.length === 0) {\n      result = false;\n    }\n\n    if (possibleBase64String.length % 4 !== 0) {\n      result = false;\n    }\n\n    if (\n      /^[A-Za-z0-9+/]+$/.test(\n        possibleBase64String.substr(0, possibleBase64String.length - 2)\n      ) === false\n    ) {\n      result = false;\n    }\n\n    if (\n      /^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(\n        possibleBase64String.substr(-2)\n      ) === false\n    ) {\n      result = false;\n    }\n    return result;\n  });\n\n  /**\n   * Strips out and returns info from a valid base64 data URI\n   *\n   * @name extractImageFromDataUrl\n   * @function\n   * @param {string} dataUrl a valid data URI of format 'data:[<MIME-type>][;base64],<data>'\n   * @returns {Array}an Array containing the following\n   * [0] the complete data URI\n   * [1] <MIME-type>\n   * [2] format - the second part of the mime-type i.e 'png' in 'image/png'\n   * [4] <data>\n   */\n  var extractImageFromDataUrl = (jsPDFAPI.__addimage__.extractImageFromDataUrl = function(\n    dataUrl\n  ) {\n    dataUrl = dataUrl || \"\";\n    var dataUrlParts = dataUrl.split(\"base64,\");\n    var result = null;\n\n    if (dataUrlParts.length === 2) {\n      var extractedInfo = /^data:(\\w*\\/\\w*);*(charset=(?!charset=)[\\w=-]*)*;*$/.exec(\n        dataUrlParts[0]\n      );\n      if (Array.isArray(extractedInfo)) {\n        result = {\n          mimeType: extractedInfo[1],\n          charset: extractedInfo[2],\n          data: dataUrlParts[1]\n        };\n      }\n    }\n    return result;\n  });\n\n  /**\n   * Check to see if ArrayBuffer is supported\n   *\n   * @name supportsArrayBuffer\n   * @function\n   * @returns {boolean}\n   */\n  var supportsArrayBuffer = (jsPDFAPI.__addimage__.supportsArrayBuffer = function() {\n    return (\n      typeof ArrayBuffer !== \"undefined\" && typeof Uint8Array !== \"undefined\"\n    );\n  });\n\n  /**\n   * Tests supplied object to determine if ArrayBuffer\n   *\n   * @name isArrayBuffer\n   * @function\n   * @param {Object} object an Object\n   *\n   * @returns {boolean}\n   */\n  jsPDFAPI.__addimage__.isArrayBuffer = function(object) {\n    return supportsArrayBuffer() && object instanceof ArrayBuffer;\n  };\n\n  /**\n   * Tests supplied object to determine if it implements the ArrayBufferView (TypedArray) interface\n   *\n   * @name isArrayBufferView\n   * @function\n   * @param {Object} object an Object\n   * @returns {boolean}\n   */\n  var isArrayBufferView = (jsPDFAPI.__addimage__.isArrayBufferView = function(\n    object\n  ) {\n    return (\n      supportsArrayBuffer() &&\n      typeof Uint32Array !== \"undefined\" &&\n      (object instanceof Int8Array ||\n        object instanceof Uint8Array ||\n        (typeof Uint8ClampedArray !== \"undefined\" &&\n          object instanceof Uint8ClampedArray) ||\n        object instanceof Int16Array ||\n        object instanceof Uint16Array ||\n        object instanceof Int32Array ||\n        object instanceof Uint32Array ||\n        object instanceof Float32Array ||\n        object instanceof Float64Array)\n    );\n  });\n\n  /**\n   * Convert Binary String to ArrayBuffer\n   *\n   * @name binaryStringToUint8Array\n   * @public\n   * @function\n   * @param {string} BinaryString with ImageData\n   * @returns {Uint8Array}\n   */\n  var binaryStringToUint8Array = (jsPDFAPI.__addimage__.binaryStringToUint8Array = function(\n    binary_string\n  ) {\n    var len = binary_string.length;\n    var bytes = new Uint8Array(len);\n    for (var i = 0; i < len; i++) {\n      bytes[i] = binary_string.charCodeAt(i);\n    }\n    return bytes;\n  });\n\n  /**\n   * Convert the Buffer to a Binary String\n   *\n   * @name arrayBufferToBinaryString\n   * @public\n   * @function\n   * @param {ArrayBuffer|ArrayBufferView} ArrayBuffer buffer or bufferView with ImageData\n   *\n   * @returns {String}\n   */\n  var arrayBufferToBinaryString = (jsPDFAPI.__addimage__.arrayBufferToBinaryString = function(\n    buffer\n  ) {\n    var out = \"\";\n    // There are calls with both ArrayBuffer and already converted Uint8Array or other BufferView.\n    // Do not copy the array if input is already an array.\n    var buf = isArrayBufferView(buffer) ? buffer : new Uint8Array(buffer);\n    for (var i = 0; i < buf.length; i += ARRAY_APPLY_BATCH) {\n      // Limit the amount of characters being parsed to prevent overflow.\n      // Note that while TextDecoder would be faster, it does not have the same\n      // functionality as fromCharCode with any provided encodings as of 3/2021.\n      out += String.fromCharCode.apply(\n        null,\n        buf.subarray(i, i + ARRAY_APPLY_BATCH)\n      );\n    }\n    return out;\n  });\n\n  /**\n   * Possible parameter for addImage, an RGBA buffer with size.\n   *\n   * @typedef {Object} RGBAData\n   * @property {Uint8ClampedArray} data - Single dimensional array of RGBA values. For example from canvas getImageData.\n   * @property {number} width - Image width as the data does not carry this information in itself.\n   * @property {number} height - Image height as the data does not carry this information in itself.\n   */\n\n  /**\n   * Adds an Image to the PDF.\n   *\n   * @name addImage\n   * @public\n   * @function\n   * @param {string|HTMLImageElement|HTMLCanvasElement|Uint8Array|RGBAData} imageData imageData as base64 encoded DataUrl or Image-HTMLElement or Canvas-HTMLElement or object containing RGBA array (like output from canvas.getImageData).\n   * @param {string} format format of file if filetype-recognition fails or in case of a Canvas-Element needs to be specified (default for Canvas is JPEG), e.g. 'JPEG', 'PNG', 'WEBP'\n   * @param {number} x x Coordinate (in units declared at inception of PDF document) against left edge of the page\n   * @param {number} y y Coordinate (in units declared at inception of PDF document) against upper edge of the page\n   * @param {number} width width of the image (in units declared at inception of PDF document)\n   * @param {number} height height of the Image (in units declared at inception of PDF document)\n   * @param {string} alias alias of the image (if used multiple times)\n   * @param {string} compression compression of the generated JPEG, can have the values 'NONE', 'FAST', 'MEDIUM' and 'SLOW'\n   * @param {number} rotation rotation of the image in degrees (0-359)\n   *\n   * @returns jsPDF\n   */\n  jsPDFAPI.addImage = function() {\n    var imageData, format, x, y, w, h, alias, compression, rotation;\n\n    imageData = arguments[0];\n    format = arguments[1];\n    x = arguments[2];\n    y = arguments[3];\n    w = arguments[4];\n    h = arguments[5];\n    alias = arguments[6];\n    compression = arguments[7];\n    rotation = arguments[8];\n\n    //If compression is not explicitly set, determine if we should use compression\n    var filter = this.internal.getFilters();\n    if (compression === undefined && filter.indexOf(\"FlateEncode\") !== -1) {\n      compression = \"SLOW\";\n    }\n\n    if (isNaN(x) || isNaN(y)) {\n      throw new Error(\"Invalid coordinates passed to jsPDF.addImage\");\n    }\n\n    initialize.call(this);\n\n    var image = processImageData.call(\n      this,\n      imageData,\n      format,\n      alias,\n      compression\n    );\n\n    writeImageToPDF.call(this, x, y, w, h, image, rotation);\n\n    return this;\n  };\n\n  var processImageData = function(imageData, format, alias, compression) {\n    var result, dataAsBinaryString;\n    imageData = unescape(imageData);\n    var tmpImageData = convertBase64ToBinaryString(imageData, false);\n    imageData = tmpImageData;\n\n    format = \"PNG\";\n    if (!isImageTypeSupported(format)) {\n      throw new Error(\n        \"addImage does not support files of type '\" +\n          format +\n          \"', please ensure that a plugin for '\" +\n          format +\n          \"' support is added.\"\n      );\n    }\n\n    // now do the heavy lifting\n\n    if (notDefined(alias)) {\n      alias = generateAliasFromImageData(imageData);\n    }\n    result = checkImagesForAlias.call(this, alias);\n\n    if (!result) {\n      if (supportsArrayBuffer()) {\n        // no need to convert if imageData is already uint8array\n        if (!(imageData instanceof Uint8Array) && format !== \"RGBA\") {\n          dataAsBinaryString = imageData;\n          imageData = binaryStringToUint8Array(imageData);\n        }\n      }\n\n      result = this[\"process\" + format.toUpperCase()](\n        imageData,\n        getImageIndex.call(this),\n        alias,\n        checkCompressValue(compression),\n        dataAsBinaryString\n      );\n    }\n\n    if (!result) {\n      throw new Error(\"An unknown error occurred whilst processing the image.\");\n    }\n    return result;\n  };\n\n  /**\n   * @name convertBase64ToBinaryString\n   * @function\n   * @param {string} stringData\n   * @returns {string} binary string\n   */\n  var convertBase64ToBinaryString = (jsPDFAPI.__addimage__.convertBase64ToBinaryString = function(\n    stringData,\n    throwError\n  ) {\n    throwError = typeof throwError === \"boolean\" ? throwError : true;\n    var base64Info;\n    var imageData = \"\";\n    var rawData;\n\n    if (typeof stringData === \"string\") {\n      base64Info = extractImageFromDataUrl(stringData);\n      rawData = base64Info !== null ? base64Info.data : stringData;\n\n      try {\n        imageData = atob(rawData);\n      } catch (e) {\n        if (throwError) {\n          if (!validateStringAsBase64(rawData)) {\n            throw new Error(\n              \"Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString \"\n            );\n          } else {\n            throw new Error(\n              \"atob-Error in jsPDF.convertBase64ToBinaryString \" + e.message\n            );\n          }\n        }\n      }\n    }\n    return imageData;\n  });\n\n  /**\n   * @name getImageProperties\n   * @function\n   * @param {Object} imageData\n   * @returns {Object}\n   */\n  jsPDFAPI.getImageProperties = function(imageData) {\n    var image;\n    var tmpImageData = \"\";\n    var format = \"PNG\";\n\n    tmpImageData = convertBase64ToBinaryString(imageData, false);\n    imageData = tmpImageData;\n\n    if (!isImageTypeSupported(format)) {\n      throw new Error(\n        \"addImage does not support files of type '\" +\n          format +\n          \"', please ensure that a plugin for '\" +\n          format +\n          \"' support is added.\"\n      );\n    }\n\n    if (supportsArrayBuffer() && !(imageData instanceof Uint8Array)) {\n      imageData = binaryStringToUint8Array(imageData);\n    }\n\n    image = this[\"process\" + format.toUpperCase()](imageData);\n\n    if (!image) {\n      throw new Error(\"An unknown error occurred whilst processing the image\");\n    }\n\n    image.fileType = format;\n\n    return image;\n  };\n})(jsPDF.API);\n","// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n// https://tools.ietf.org/html/rfc1951\n// You may also wish to take a look at the guide I made about this program:\n// https://gist.github.com/101arrowz/253f31eb5abc3d9275ab943003ffecad\n// Much of the following code is similar to that of UZIP.js:\n// https://github.com/photopea/UZIP.js\n// Many optimizations have been made, so the bundle size is ultimately smaller but performance is similar.\n// Sometimes 0 will appear where -1 would be more appropriate. This is because using a uint\n// is better for memory in most engines (I *think*).\n// Mediocre shim\nvar Worker;\nvar workerAdd = \";var __w=require('worker_threads');__w.parentPort.on('message',function(m){onmessage({data:m})}),postMessage=function(m,t){__w.parentPort.postMessage(m,t)},close=process.exit;self=global\";\ntry {\n    Worker = require('worker_threads').Worker;\n}\ncatch (e) {\n}\nvar wk = Worker ? function (c, _, msg, transfer, cb) {\n    var done = false;\n    var w = new Worker(c + workerAdd, { eval: true })\n        .on('error', function (e) { return cb(e, null); })\n        .on('message', function (m) { return cb(null, m); })\n        .on('exit', function (c) {\n        if (c && !done)\n            cb(new Error('exited with code ' + c), null);\n    });\n    w.postMessage(msg, transfer);\n    w.terminate = function () {\n        done = true;\n        return Worker.prototype.terminate.call(w);\n    };\n    return w;\n} : function (_, __, ___, ____, cb) {\n    setImmediate(function () { return cb(new Error('async operations unsupported - update to Node 12+ (or Node 10-11 with the --experimental-worker CLI flag)'), null); });\n    var NOP = function () { };\n    return {\n        terminate: NOP,\n        postMessage: NOP\n    };\n};\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array, u16 = Uint16Array, u32 = Uint32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\n// fixed distance extra bits\n// see fleb note\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n        b[i] = start += 1 << eb[i - 1];\n    }\n    // numbers here are at max 18 bits\n    var r = new u32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n        for (var j = b[i]; j < b[i + 1]; ++j) {\n            r[j] = ((j - b[i]) << 5) | i;\n        }\n    }\n    return [b, r];\n};\nvar _a = freb(fleb, 2), fl = _a[0], revfl = _a[1];\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b[0], revfd = _b[1];\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n    // reverse table algorithm from SO\n    var x = ((i & 0xAAAA) >>> 1) | ((i & 0x5555) << 1);\n    x = ((x & 0xCCCC) >>> 2) | ((x & 0x3333) << 2);\n    x = ((x & 0xF0F0) >>> 4) | ((x & 0x0F0F) << 4);\n    rev[i] = (((x & 0xFF00) >>> 8) | ((x & 0x00FF) << 8)) >>> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = (function (cd, mb, r) {\n    var s = cd.length;\n    // index\n    var i = 0;\n    // u16 \"map\": index -> # of codes with bit length = index\n    var l = new u16(mb);\n    // length of cd must be 288 (total # of codes)\n    for (; i < s; ++i)\n        ++l[cd[i] - 1];\n    // u16 \"map\": index -> minimum code for bit length = index\n    var le = new u16(mb);\n    for (i = 0; i < mb; ++i) {\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\n    }\n    var co;\n    if (r) {\n        // u16 \"map\": index -> number of actual bits, symbol for code\n        co = new u16(1 << mb);\n        // bits to remove for reverser\n        var rvb = 15 - mb;\n        for (i = 0; i < s; ++i) {\n            // ignore 0 lengths\n            if (cd[i]) {\n                // num encoding both symbol and bits read\n                var sv = (i << 4) | cd[i];\n                // free bits\n                var r_1 = mb - cd[i];\n                // start value\n                var v = le[cd[i] - 1]++ << r_1;\n                // m is end value\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\n                    // every 16 bit value starting with the code yields the same result\n                    co[rev[v] >>> rvb] = sv;\n                }\n            }\n        }\n    }\n    else {\n        co = new u16(s);\n        for (i = 0; i < s; ++i)\n            co[i] = rev[le[cd[i] - 1]++] >>> (15 - cd[i]);\n    }\n    return co;\n});\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n    flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n    flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n    flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n    flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n    fdt[i] = 5;\n// fixed length map\nvar flm = /*#__PURE__*/ hMap(flt, 9, 0), flrm = /*#__PURE__*/ hMap(flt, 9, 1);\n// fixed distance map\nvar fdm = /*#__PURE__*/ hMap(fdt, 5, 0), fdrm = /*#__PURE__*/ hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n        if (a[i] > m)\n            m = a[i];\n    }\n    return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n    var o = (p / 8) >> 0;\n    return ((d[o] | (d[o + 1] << 8)) >>> (p & 7)) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n    var o = (p / 8) >> 0;\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >>> (p & 7));\n};\n// get end of byte\nvar shft = function (p) { return ((p / 8) >> 0) + (p & 7 && 1); };\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n    if (s == null || s < 0)\n        s = 0;\n    if (e == null || e > v.length)\n        e = v.length;\n    // can't use .constructor in case user-supplied\n    var n = new (v instanceof u16 ? u16 : v instanceof u32 ? u32 : u8)(e - s);\n    n.set(v.subarray(s, e));\n    return n;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, buf, st) {\n    // source length\n    var sl = dat.length;\n    // have to estimate size\n    var noBuf = !buf || st;\n    // no state\n    var noSt = !st || st.i;\n    if (!st)\n        st = {};\n    // Assumes roughly 33% compression ratio average\n    if (!buf)\n        buf = new u8(sl * 3);\n    // ensure buffer can fit at least l elements\n    var cbuf = function (l) {\n        var bl = buf.length;\n        // need to increase size to fit\n        if (l > bl) {\n            // Double or set to necessary, whichever is greater\n            var nbuf = new u8(Math.max(bl * 2, l));\n            nbuf.set(buf);\n            buf = nbuf;\n        }\n    };\n    //  last chunk         bitpos           bytes\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    // total bits\n    var tbts = sl * 8;\n    do {\n        if (!lm) {\n            // BFINAL - this is only 1 when last chunk is next\n            st.f = final = bits(dat, pos, 1);\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n            var type = bits(dat, pos + 1, 3);\n            pos += 3;\n            if (!type) {\n                // go to end of byte boundary\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\n                if (t > sl) {\n                    if (noSt)\n                        throw 'unexpected EOF';\n                    break;\n                }\n                // ensure size\n                if (noBuf)\n                    cbuf(bt + l);\n                // Copy over uncompressed data\n                buf.set(dat.subarray(s, t), bt);\n                // Get new bitpos, update byte count\n                st.b = bt += l, st.p = pos = t * 8;\n                continue;\n            }\n            else if (type == 1)\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n            else if (type == 2) {\n                //  literal                            lengths\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\n                pos += 14;\n                // length+distance tree\n                var ldt = new u8(tl);\n                // code length tree\n                var clt = new u8(19);\n                for (var i = 0; i < hcLen; ++i) {\n                    // use index map to get real code\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\n                }\n                pos += hcLen * 3;\n                // code lengths bits\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\n                if (!noSt && pos + tl * (clb + 7) > tbts)\n                    break;\n                // code lengths map\n                var clm = hMap(clt, clb, 1);\n                for (var i = 0; i < tl;) {\n                    var r = clm[bits(dat, pos, clbmsk)];\n                    // bits read\n                    pos += r & 15;\n                    // symbol\n                    var s = r >>> 4;\n                    // code length to copy\n                    if (s < 16) {\n                        ldt[i++] = s;\n                    }\n                    else {\n                        //  copy   count\n                        var c = 0, n = 0;\n                        if (s == 16)\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n                        else if (s == 17)\n                            n = 3 + bits(dat, pos, 7), pos += 3;\n                        else if (s == 18)\n                            n = 11 + bits(dat, pos, 127), pos += 7;\n                        while (n--)\n                            ldt[i++] = c;\n                    }\n                }\n                //    length tree                 distance tree\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n                // max length bits\n                lbt = max(lt);\n                // max dist bits\n                dbt = max(dt);\n                lm = hMap(lt, lbt, 1);\n                dm = hMap(dt, dbt, 1);\n            }\n            else\n                throw 'invalid block type';\n            if (pos > tbts)\n                throw 'unexpected EOF';\n        }\n        // Make sure the buffer can hold this + the largest possible addition\n        // Maximum chunk size (practically, theoretically infinite) is 2^17;\n        if (noBuf)\n            cbuf(bt + 131072);\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n        var mxa = lbt + dbt + 18;\n        while (noSt || pos + mxa < tbts) {\n            // bits read, code\n            var c = lm[bits16(dat, pos) & lms], sym = c >>> 4;\n            pos += c & 15;\n            if (pos > tbts)\n                throw 'unexpected EOF';\n            if (!c)\n                throw 'invalid length/literal';\n            if (sym < 256)\n                buf[bt++] = sym;\n            else if (sym == 256) {\n                lm = null;\n                break;\n            }\n            else {\n                var add = sym - 254;\n                // no extra bits needed if less\n                if (sym > 264) {\n                    // index\n                    var i = sym - 257, b = fleb[i];\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\n                    pos += b;\n                }\n                // dist\n                var d = dm[bits16(dat, pos) & dms], dsym = d >>> 4;\n                if (!d)\n                    throw 'invalid distance';\n                pos += d & 15;\n                var dt = fd[dsym];\n                if (dsym > 3) {\n                    var b = fdeb[dsym];\n                    dt += bits16(dat, pos) & ((1 << b) - 1), pos += b;\n                }\n                if (pos > tbts)\n                    throw 'unexpected EOF';\n                if (noBuf)\n                    cbuf(bt + 131072);\n                var end = bt + add;\n                for (; bt < end; bt += 4) {\n                    buf[bt] = buf[bt - dt];\n                    buf[bt + 1] = buf[bt + 1 - dt];\n                    buf[bt + 2] = buf[bt + 2 - dt];\n                    buf[bt + 3] = buf[bt + 3 - dt];\n                }\n                bt = end;\n            }\n        }\n        st.l = lm, st.p = pos, st.b = bt;\n        if (lm)\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    return bt == buf.length ? buf : slc(buf, 0, bt);\n};\n// starting at p, write the minimum number of bits that can hold v to d\nvar wbits = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) >> 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n};\n// starting at p, write the minimum number of bits (>8) that can hold v to d\nvar wbits16 = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) >> 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n    d[o + 2] |= v >>> 16;\n};\n// creates code lengths from a frequency table\nvar hTree = function (d, mb) {\n    // Need extra info to make a tree\n    var t = [];\n    for (var i = 0; i < d.length; ++i) {\n        if (d[i])\n            t.push({ s: i, f: d[i] });\n    }\n    var s = t.length;\n    var t2 = t.slice();\n    if (!s)\n        return [new u8(0), 0];\n    if (s == 1) {\n        var v = new u8(t[0].s + 1);\n        v[t[0].s] = 1;\n        return [v, 1];\n    }\n    t.sort(function (a, b) { return a.f - b.f; });\n    // after i2 reaches last ind, will be stopped\n    // freq must be greater than largest possible number of symbols\n    t.push({ s: -1, f: 25001 });\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\n    // efficient algorithm from UZIP.js\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n    // symbols that combined have high freq, will start processing i2 (high-freq,\n    // non-composite) symbols instead\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n    while (i1 != s - 1) {\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\n    }\n    var maxSym = t2[0].s;\n    for (var i = 1; i < s; ++i) {\n        if (t2[i].s > maxSym)\n            maxSym = t2[i].s;\n    }\n    // code lengths\n    var tr = new u16(maxSym + 1);\n    // max bits in tree\n    var mbt = ln(t[i1 - 1], tr, 0);\n    if (mbt > mb) {\n        // more algorithms from UZIP.js\n        // TODO: find out how this code works (debt)\n        //  ind    debt\n        var i = 0, dt = 0;\n        //    left            cost\n        var lft = mbt - mb, cst = 1 << lft;\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\n        for (; i < s; ++i) {\n            var i2_1 = t2[i].s;\n            if (tr[i2_1] > mb) {\n                dt += cst - (1 << (mbt - tr[i2_1]));\n                tr[i2_1] = mb;\n            }\n            else\n                break;\n        }\n        dt >>>= lft;\n        while (dt > 0) {\n            var i2_2 = t2[i].s;\n            if (tr[i2_2] < mb)\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\n            else\n                ++i;\n        }\n        for (; i >= 0 && dt; --i) {\n            var i2_3 = t2[i].s;\n            if (tr[i2_3] == mb) {\n                --tr[i2_3];\n                ++dt;\n            }\n        }\n        mbt = mb;\n    }\n    return [new u8(tr), mbt];\n};\n// get the max length and assign length codes\nvar ln = function (n, l, d) {\n    return n.s == -1\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\n        : (l[n.s] = d);\n};\n// length codes generation\nvar lc = function (c) {\n    var s = c.length;\n    // Note that the semicolon was intentional\n    while (s && !c[--s])\n        ;\n    var cl = new u16(++s);\n    //  ind      num         streak\n    var cli = 0, cln = c[0], cls = 1;\n    var w = function (v) { cl[cli++] = v; };\n    for (var i = 1; i <= s; ++i) {\n        if (c[i] == cln && i != s)\n            ++cls;\n        else {\n            if (!cln && cls > 2) {\n                for (; cls > 138; cls -= 138)\n                    w(32754);\n                if (cls > 2) {\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\n                    cls = 0;\n                }\n            }\n            else if (cls > 3) {\n                w(cln), --cls;\n                for (; cls > 6; cls -= 6)\n                    w(8304);\n                if (cls > 2)\n                    w(((cls - 3) << 5) | 8208), cls = 0;\n            }\n            while (cls--)\n                w(cln);\n            cls = 1;\n            cln = c[i];\n        }\n    }\n    return [cl.subarray(0, cli), s];\n};\n// calculate the length of output from tree, code lengths\nvar clen = function (cf, cl) {\n    var l = 0;\n    for (var i = 0; i < cl.length; ++i)\n        l += cf[i] * cl[i];\n    return l;\n};\n// writes a fixed block\n// returns the new bit pos\nvar wfblk = function (out, pos, dat) {\n    // no need to write 00 as type: TypedArray defaults to 0\n    var s = dat.length;\n    var o = shft(pos + 2);\n    out[o] = s & 255;\n    out[o + 1] = s >>> 8;\n    out[o + 2] = out[o] ^ 255;\n    out[o + 3] = out[o + 1] ^ 255;\n    for (var i = 0; i < s; ++i)\n        out[o + i + 4] = dat[i];\n    return (o + 4 + s) * 8;\n};\n// writes a block\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n    wbits(out, p++, final);\n    ++lf[256];\n    var _a = hTree(lf, 15), dlt = _a[0], mlb = _a[1];\n    var _b = hTree(df, 15), ddt = _b[0], mdb = _b[1];\n    var _c = lc(dlt), lclt = _c[0], nlc = _c[1];\n    var _d = lc(ddt), lcdt = _d[0], ndc = _d[1];\n    var lcfreq = new u16(19);\n    for (var i = 0; i < lclt.length; ++i)\n        lcfreq[lclt[i] & 31]++;\n    for (var i = 0; i < lcdt.length; ++i)\n        lcfreq[lcdt[i] & 31]++;\n    var _e = hTree(lcfreq, 7), lct = _e[0], mlcb = _e[1];\n    var nlcc = 19;\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\n        ;\n    var flen = (bl + 5) << 3;\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + (2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18]);\n    if (flen <= ftlen && flen <= dtlen)\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\n    var lm, ll, dm, dl;\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n    if (dtlen < ftlen) {\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n        var llm = hMap(lct, mlcb, 0);\n        wbits(out, p, nlc - 257);\n        wbits(out, p + 5, ndc - 1);\n        wbits(out, p + 10, nlcc - 4);\n        p += 14;\n        for (var i = 0; i < nlcc; ++i)\n            wbits(out, p + 3 * i, lct[clim[i]]);\n        p += 3 * nlcc;\n        var lcts = [lclt, lcdt];\n        for (var it = 0; it < 2; ++it) {\n            var clct = lcts[it];\n            for (var i = 0; i < clct.length; ++i) {\n                var len = clct[i] & 31;\n                wbits(out, p, llm[len]), p += lct[len];\n                if (len > 15)\n                    wbits(out, p, (clct[i] >>> 5) & 127), p += clct[i] >>> 12;\n            }\n        }\n    }\n    else {\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\n    }\n    for (var i = 0; i < li; ++i) {\n        if (syms[i] > 255) {\n            var len = (syms[i] >>> 18) & 31;\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n            if (len > 7)\n                wbits(out, p, (syms[i] >>> 23) & 31), p += fleb[len];\n            var dst = syms[i] & 31;\n            wbits16(out, p, dm[dst]), p += dl[dst];\n            if (dst > 3)\n                wbits16(out, p, (syms[i] >>> 5) & 8191), p += fdeb[dst];\n        }\n        else {\n            wbits16(out, p, lm[syms[i]]), p += ll[syms[i]];\n        }\n    }\n    wbits16(out, p, lm[256]);\n    return p + ll[256];\n};\n// deflate options (nice << 13) | chain\nvar deo = /*#__PURE__*/ new u32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\n// empty\nvar et = /*#__PURE__*/ new u8(0);\n// compresses data into a raw DEFLATE buffer\nvar dflt = function (dat, lvl, plvl, pre, post, lst) {\n    var s = dat.length;\n    var o = new u8(pre + s + 5 * (1 + Math.floor(s / 7000)) + post);\n    // writing to this writes to the output buffer\n    var w = o.subarray(pre, o.length - post);\n    var pos = 0;\n    if (!lvl || s < 8) {\n        for (var i = 0; i <= s; i += 65535) {\n            // end\n            var e = i + 65535;\n            if (e < s) {\n                // write full block\n                pos = wfblk(w, pos, dat.subarray(i, e));\n            }\n            else {\n                // write final block\n                w[i] = lst;\n                pos = wfblk(w, pos, dat.subarray(i, s));\n            }\n        }\n    }\n    else {\n        var opt = deo[lvl - 1];\n        var n = opt >>> 13, c = opt & 8191;\n        var msk_1 = (1 << plvl) - 1;\n        //    prev 2-byte val map    curr 2-byte val map\n        var prev = new u16(32768), head = new u16(msk_1 + 1);\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\n        // 24576 is an arbitrary number of maximum symbols per block\n        // 424 buffer for last block\n        var syms = new u32(25000);\n        // length/literal freq   distance freq\n        var lf = new u16(288), df = new u16(32);\n        //  l/lcnt  exbits  index  l/lind  waitdx  bitpos\n        var lc_1 = 0, eb = 0, i = 0, li = 0, wi = 0, bs = 0;\n        for (; i < s; ++i) {\n            // hash value\n            var hv = hsh(i);\n            // index mod 32768\n            var imod = i & 32767;\n            // previous index with this value\n            var pimod = head[hv];\n            prev[imod] = pimod;\n            head[hv] = imod;\n            // We always should modify head and prev, but only add symbols if\n            // this data is not yet processed (\"wait\" for wait index)\n            if (wi <= i) {\n                // bytes remaining\n                var rem = s - i;\n                if ((lc_1 > 7000 || li > 24576) && rem > 423) {\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n                    li = lc_1 = eb = 0, bs = i;\n                    for (var j = 0; j < 286; ++j)\n                        lf[j] = 0;\n                    for (var j = 0; j < 30; ++j)\n                        df[j] = 0;\n                }\n                //  len    dist   chain\n                var l = 2, d = 0, ch_1 = c, dif = (imod - pimod) & 32767;\n                if (rem > 2 && hv == hsh(i - dif)) {\n                    var maxn = Math.min(n, rem) - 1;\n                    var maxd = Math.min(32767, i);\n                    // max possible length\n                    // not capped at dif because decompressors implement \"rolling\" index population\n                    var ml = Math.min(258, rem);\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\n                        if (dat[i + l] == dat[i + l - dif]) {\n                            var nl = 0;\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\n                                ;\n                            if (nl > l) {\n                                l = nl, d = dif;\n                                // break out early when we reach \"nice\" (we are satisfied enough)\n                                if (nl > maxn)\n                                    break;\n                                // now, find the rarest 2-byte sequence within this\n                                // length of literals and search for that instead.\n                                // Much faster than just using the start\n                                var mmd = Math.min(dif, nl - 2);\n                                var md = 0;\n                                for (var j = 0; j < mmd; ++j) {\n                                    var ti = (i - dif + j + 32768) & 32767;\n                                    var pti = prev[ti];\n                                    var cd = (ti - pti + 32768) & 32767;\n                                    if (cd > md)\n                                        md = cd, pimod = ti;\n                                }\n                            }\n                        }\n                        // check the previous match\n                        imod = pimod, pimod = prev[imod];\n                        dif += (imod - pimod + 32768) & 32767;\n                    }\n                }\n                // d will be nonzero only when a match was found\n                if (d) {\n                    // store both dist and len data in one Uint32\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\n                    eb += fleb[lin] + fdeb[din];\n                    ++lf[257 + lin];\n                    ++df[din];\n                    wi = i + l;\n                    ++lc_1;\n                }\n                else {\n                    syms[li++] = dat[i];\n                    ++lf[dat[i]];\n                }\n            }\n        }\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n        // this is the easiest way to avoid needing to maintain state\n        if (!lst)\n            pos = wfblk(w, pos, et);\n    }\n    return slc(o, 0, pre + shft(pos) + post);\n};\n// CRC32 table\nvar crct = /*#__PURE__*/ (function () {\n    var t = new u32(256);\n    for (var i = 0; i < 256; ++i) {\n        var c = i, k = 9;\n        while (--k)\n            c = ((c & 1) && 0xEDB88320) ^ (c >>> 1);\n        t[i] = c;\n    }\n    return t;\n})();\n// CRC32\nvar crc = function () {\n    var c = 0xFFFFFFFF;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var cr = c;\n            for (var i = 0; i < d.length; ++i)\n                cr = crct[(cr & 255) ^ d[i]] ^ (cr >>> 8);\n            c = cr;\n        },\n        d: function () { return c ^ 0xFFFFFFFF; }\n    };\n};\n// Alder32\nvar adler = function () {\n    var a = 1, b = 0;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var n = a, m = b;\n            var l = d.length;\n            for (var i = 0; i != l;) {\n                var e = Math.min(i + 5552, l);\n                for (; i < e; ++i)\n                    n += d[i], m += n;\n                n %= 65521, m %= 65521;\n            }\n            a = n, b = m;\n        },\n        d: function () { return ((a >>> 8) << 16 | (b & 255) << 8 | (b >>> 8)) + ((a & 255) << 23) * 2; }\n    };\n};\n;\n// deflate with opts\nvar dopt = function (dat, opt, pre, post, st) {\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : (12 + opt.mem), pre, post, !st);\n};\n// Walmart object spread\nvar mrg = function (a, b) {\n    var o = {};\n    for (var k in a)\n        o[k] = a[k];\n    for (var k in b)\n        o[k] = b[k];\n    return o;\n};\n// worker clone\n// This is possibly the craziest part of the entire codebase, despite how simple it may seem.\n// The only parameter to this function is a closure that returns an array of variables outside of the function scope.\n// We're going to try to figure out the variable names used in the closure as strings because that is crucial for workerization.\n// We will return an object mapping of true variable name to value (basically, the current scope as a JS object).\n// The reason we can't just use the original variable names is minifiers mangling the toplevel scope.\n// This took me three weeks to figure out how to do.\nvar wcln = function (fn, fnStr, td) {\n    var dt = fn();\n    var st = fn.toString();\n    var ks = st.slice(st.indexOf('[') + 1, st.lastIndexOf(']')).replace(/ /g, '').split(',');\n    for (var i = 0; i < dt.length; ++i) {\n        var v = dt[i], k = ks[i];\n        if (typeof v == 'function') {\n            fnStr += ';' + k + '=';\n            var st_1 = v.toString();\n            if (v.prototype) {\n                // for global objects\n                if (st_1.indexOf('[native code]') != -1) {\n                    var spInd = st_1.indexOf(' ', 8) + 1;\n                    fnStr += st_1.slice(spInd, st_1.indexOf('(', spInd));\n                }\n                else {\n                    fnStr += st_1;\n                    for (var t in v.prototype)\n                        fnStr += ';' + k + '.prototype.' + t + '=' + v.prototype[t].toString();\n                }\n            }\n            else\n                fnStr += st_1;\n        }\n        else\n            td[k] = v;\n    }\n    return [fnStr, td];\n};\nvar ch = [];\n// clone bufs\nvar cbfs = function (v) {\n    var tl = [];\n    for (var k in v) {\n        if (v[k] instanceof u8 || v[k] instanceof u16 || v[k] instanceof u32)\n            tl.push((v[k] = new v[k].constructor(v[k])).buffer);\n    }\n    return tl;\n};\n// use a worker to execute code\nvar wrkr = function (fns, init, id, cb) {\n    var _a;\n    if (!ch[id]) {\n        var fnStr = '', td_1 = {}, m = fns.length - 1;\n        for (var i = 0; i < m; ++i)\n            _a = wcln(fns[i], fnStr, td_1), fnStr = _a[0], td_1 = _a[1];\n        ch[id] = wcln(fns[m], fnStr, td_1);\n    }\n    var td = mrg({}, ch[id][1]);\n    return wk(ch[id][0] + ';onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=' + init.toString() + '}', id, td, cbfs(td), cb);\n};\n// base async inflate fn\nvar bInflt = function () { return [u8, u16, u32, fleb, fdeb, clim, fl, fd, flrm, fdrm, rev, hMap, max, bits, bits16, shft, slc, inflt, inflateSync, pbf, gu8]; };\nvar bDflt = function () { return [u8, u16, u32, fleb, fdeb, clim, revfl, revfd, flm, flt, fdm, fdt, rev, deo, et, hMap, wbits, wbits16, hTree, ln, lc, clen, wfblk, wblk, shft, slc, dflt, dopt, deflateSync, pbf]; };\n// gzip extra\nvar gze = function () { return [gzh, gzhl, wbytes, crc, crct]; };\n// gunzip extra\nvar guze = function () { return [gzs, gzl]; };\n// zlib extra\nvar zle = function () { return [zlh, wbytes, adler]; };\n// unzlib extra\nvar zule = function () { return [zlv]; };\n// post buf\nvar pbf = function (msg) { return postMessage(msg, [msg.buffer]); };\n// get u8\nvar gu8 = function (o) { return o && o.size && new u8(o.size); };\n// async helper\nvar cbify = function (dat, opts, fns, init, id, cb) {\n    var w = wrkr(fns, init, id, function (err, dat) {\n        w.terminate();\n        cb(err, dat);\n    });\n    if (!opts.consume)\n        dat = new u8(dat);\n    w.postMessage([dat, opts], [dat.buffer]);\n    return function () { w.terminate(); };\n};\n// auto stream\nvar astrm = function (strm) {\n    strm.ondata = function (dat, final) { return postMessage([dat, final], [dat.buffer]); };\n    return function (ev) { return strm.push(ev.data[0], ev.data[1]); };\n};\n// async stream attach\nvar astrmify = function (fns, strm, opts, init, id) {\n    var t;\n    var w = wrkr(fns, init, id, function (err, dat) {\n        if (err)\n            w.terminate(), strm.ondata.call(strm, err);\n        else {\n            if (dat[1])\n                w.terminate();\n            strm.ondata.call(strm, err, dat[0], dat[1]);\n        }\n    });\n    w.postMessage(opts);\n    strm.push = function (d, f) {\n        if (t)\n            throw 'stream finished';\n        if (!strm.ondata)\n            throw 'no stream handler';\n        w.postMessage([d, t = f], [d.buffer]);\n    };\n    strm.terminate = function () { w.terminate(); };\n};\n// read 2 bytes\nvar b2 = function (d, b) { return d[b] | (d[b + 1] << 8); };\n// read 4 bytes\nvar b4 = function (d, b) { return (d[b] | (d[b + 1] << 8) | (d[b + 2] << 16)) + (d[b + 3] << 23) * 2; };\n// write bytes\nvar wbytes = function (d, b, v) {\n    for (; v; ++b)\n        d[b] = v, v >>>= 8;\n};\n// gzip header\nvar gzh = function (c, o) {\n    var fn = o.filename;\n    c[0] = 31, c[1] = 139, c[2] = 8, c[8] = o.level < 2 ? 4 : o.level == 9 ? 2 : 0, c[9] = 3; // assume Unix\n    if (o.mtime != 0)\n        wbytes(c, 4, Math.floor(new Date(o.mtime || Date.now()) / 1000));\n    if (fn) {\n        c[3] = 8;\n        for (var i = 0; i <= fn.length; ++i)\n            c[i + 10] = fn.charCodeAt(i);\n    }\n};\n// gzip footer: -8 to -4 = CRC, -4 to -0 is length\n// gzip start\nvar gzs = function (d) {\n    if (d[0] != 31 || d[1] != 139 || d[2] != 8)\n        throw 'invalid gzip data';\n    var flg = d[3];\n    var st = 10;\n    if (flg & 4)\n        st += d[10] | (d[11] << 8) + 2;\n    for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++])\n        ;\n    return st + (flg & 2);\n};\n// gzip length\nvar gzl = function (d) {\n    var l = d.length;\n    return (d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16) + (2 * (d[l - 1] << 23));\n};\n// gzip header length\nvar gzhl = function (o) { return 10 + ((o.filename && (o.filename.length + 1)) || 0); };\n// zlib header\nvar zlh = function (c, o) {\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n    c[0] = 120, c[1] = (fl << 6) | (fl ? (32 - 2 * fl) : 1);\n};\n// zlib valid\nvar zlv = function (d) {\n    if ((d[0] & 15) != 8 || (d[0] >>> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\n        throw 'invalid zlib data';\n    if (d[1] & 32)\n        throw 'invalid zlib data: preset dictionaries not supported';\n};\nfunction AsyncCmpStrm(opts, cb) {\n    if (!cb && typeof opts == 'function')\n        cb = opts, opts = {};\n    this.ondata = cb;\n    return opts;\n}\n// zlib footer: -4 to -0 is Adler32\n/**\n * Streaming DEFLATE compression\n */\nvar Deflate = /*#__PURE__*/ (function () {\n    function Deflate(opts, cb) {\n        if (!cb && typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        this.o = opts || {};\n    }\n    Deflate.prototype.p = function (c, f) {\n        this.ondata(dopt(c, this.o, 0, 0, !f), f);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Deflate.prototype.push = function (chunk, final) {\n        if (this.d)\n            throw 'stream finished';\n        if (!this.ondata)\n            throw 'no stream handler';\n        this.d = final;\n        this.p(chunk, final || false);\n    };\n    return Deflate;\n}());\nexport { Deflate };\n/**\n * Asynchronous streaming DEFLATE compression\n */\nvar AsyncDeflate = /*#__PURE__*/ (function () {\n    function AsyncDeflate(opts, cb) {\n        astrmify([\n            bDflt,\n            function () { return [astrm, Deflate]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Deflate(ev.data);\n            onmessage = astrm(strm);\n        }, 6);\n    }\n    return AsyncDeflate;\n}());\nexport { AsyncDeflate };\nexport function deflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bDflt,\n    ], function (ev) { return pbf(deflateSync(ev.data[0], ev.data[1])); }, 0, cb);\n}\n/**\n * Compresses data with DEFLATE without any wrapper\n * @param data The data to compress\n * @param opts The compression options\n * @returns The deflated version of the data\n */\nexport function deflateSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    return dopt(data, opts, 0, 0);\n}\n/**\n * Streaming DEFLATE decompression\n */\nvar Inflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an inflation stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Inflate(cb) {\n        this.s = {};\n        this.p = new u8(0);\n        this.ondata = cb;\n    }\n    Inflate.prototype.e = function (c) {\n        if (this.d)\n            throw 'stream finished';\n        if (!this.ondata)\n            throw 'no stream handler';\n        var l = this.p.length;\n        var n = new u8(l + c.length);\n        n.set(this.p), n.set(c, l), this.p = n;\n    };\n    Inflate.prototype.c = function (final) {\n        this.d = this.s.i = final || false;\n        var bts = this.s.b;\n        var dt = inflt(this.p, this.o, this.s);\n        this.ondata(slc(dt, bts, this.s.b), this.d);\n        this.o = slc(dt, this.s.b - 32768), this.s.b = this.o.length;\n        this.p = slc(this.p, (this.s.p / 8) >> 0), this.s.p &= 7;\n    };\n    /**\n     * Pushes a chunk to be inflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the final chunk\n     */\n    Inflate.prototype.push = function (chunk, final) {\n        this.e(chunk), this.c(final);\n    };\n    return Inflate;\n}());\nexport { Inflate };\n/**\n * Asynchronous streaming DEFLATE decompression\n */\nvar AsyncInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous inflation stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncInflate(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            function () { return [astrm, Inflate]; }\n        ], this, 0, function () {\n            var strm = new Inflate();\n            onmessage = astrm(strm);\n        }, 7);\n    }\n    return AsyncInflate;\n}());\nexport { AsyncInflate };\nexport function inflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bInflt\n    ], function (ev) { return pbf(inflateSync(ev.data[0], gu8(ev.data[1]))); }, 1, cb);\n}\n/**\n * Expands DEFLATE data with no wrapper\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function inflateSync(data, out) {\n    return inflt(data, out);\n}\n// before you yell at me for not just using extends, my reason is that TS inheritance is hard to workerize.\n/**\n * Streaming GZIP compression\n */\nvar Gzip = /*#__PURE__*/ (function () {\n    function Gzip(opts, cb) {\n        this.c = crc();\n        this.l = 0;\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gzip.prototype.push = function (chunk, final) {\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Gzip.prototype.p = function (c, f) {\n        this.c.p(c);\n        this.l += c.length;\n        var raw = dopt(c, this.o, this.v && gzhl(this.o), f && 8, !f);\n        if (this.v)\n            gzh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 8, this.c.d()), wbytes(raw, raw.length - 4, this.l);\n        this.ondata(raw, f);\n    };\n    return Gzip;\n}());\nexport { Gzip };\n/**\n * Asynchronous streaming GZIP compression\n */\nvar AsyncGzip = /*#__PURE__*/ (function () {\n    function AsyncGzip(opts, cb) {\n        astrmify([\n            bDflt,\n            gze,\n            function () { return [astrm, Deflate, Gzip]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Gzip(ev.data);\n            onmessage = astrm(strm);\n        }, 8);\n    }\n    return AsyncGzip;\n}());\nexport { AsyncGzip };\nexport function gzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bDflt,\n        gze,\n        function () { return [gzipSync]; }\n    ], function (ev) { return pbf(gzipSync(ev.data[0], ev.data[1])); }, 2, cb);\n}\n/**\n * Compresses data with GZIP\n * @param data The data to compress\n * @param opts The compression options\n * @returns The gzipped version of the data\n */\nexport function gzipSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    var c = crc(), l = data.length;\n    c.p(data);\n    var d = dopt(data, opts, gzhl(opts), 8), s = d.length;\n    return gzh(d, opts), wbytes(d, s - 8, c.d()), wbytes(d, s - 4, l), d;\n}\n/**\n * Streaming GZIP decompression\n */\nvar Gunzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates a GUNZIP stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Gunzip(cb) {\n        this.v = 1;\n        Inflate.call(this, cb);\n    }\n    /**\n     * Pushes a chunk to be GUNZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gunzip.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            var s = gzs(this.p);\n            if (s >= this.p.length && !final)\n                return;\n            this.p = this.p.subarray(s), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 8)\n                throw 'invalid gzip stream';\n            this.p = this.p.subarray(0, -8);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Gunzip;\n}());\nexport { Gunzip };\n/**\n * Asynchronous streaming GZIP decompression\n */\nvar AsyncGunzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous GUNZIP stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncGunzip(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            guze,\n            function () { return [astrm, Inflate, Gunzip]; }\n        ], this, 0, function () {\n            var strm = new Gunzip();\n            onmessage = astrm(strm);\n        }, 9);\n    }\n    return AsyncGunzip;\n}());\nexport { AsyncGunzip };\nexport function gunzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bInflt,\n        guze,\n        function () { return [gunzipSync]; }\n    ], function (ev) { return pbf(gunzipSync(ev.data[0])); }, 3, cb);\n}\n/**\n * Expands GZIP data\n * @param data The data to decompress\n * @param out Where to write the data. GZIP already encodes the output size, so providing this doesn't save memory.\n * @returns The decompressed version of the data\n */\nexport function gunzipSync(data, out) {\n    return inflt(data.subarray(gzs(data), -8), out || new u8(gzl(data)));\n}\n/**\n * Streaming Zlib compression\n */\nvar Zlib = /*#__PURE__*/ (function () {\n    function Zlib(opts, cb) {\n        this.c = adler();\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be zlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Zlib.prototype.push = function (chunk, final) {\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Zlib.prototype.p = function (c, f) {\n        this.c.p(c);\n        var raw = dopt(c, this.o, this.v && 2, f && 4, !f);\n        if (this.v)\n            zlh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 4, this.c.d());\n        this.ondata(raw, f);\n    };\n    return Zlib;\n}());\nexport { Zlib };\n/**\n * Asynchronous streaming Zlib compression\n */\nvar AsyncZlib = /*#__PURE__*/ (function () {\n    function AsyncZlib(opts, cb) {\n        astrmify([\n            bDflt,\n            zle,\n            function () { return [astrm, Deflate, Zlib]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Zlib(ev.data);\n            onmessage = astrm(strm);\n        }, 10);\n    }\n    return AsyncZlib;\n}());\nexport { AsyncZlib };\nexport function zlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bDflt,\n        zle,\n        function () { return [zlibSync]; }\n    ], function (ev) { return pbf(zlibSync(ev.data[0], ev.data[1])); }, 4, cb);\n}\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\nexport function zlibSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    var a = adler();\n    a.p(data);\n    var d = dopt(data, opts, 2, 4);\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Streaming Zlib decompression\n */\nvar Unzlib = /*#__PURE__*/ (function () {\n    /**\n     * Creates a Zlib decompression stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Unzlib(cb) {\n        this.v = 1;\n        Inflate.call(this, cb);\n    }\n    /**\n     * Pushes a chunk to be unzlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzlib.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            if (this.p.length < 2 && !final)\n                return;\n            this.p = this.p.subarray(2), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 4)\n                throw 'invalid zlib stream';\n            this.p = this.p.subarray(0, -4);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Unzlib;\n}());\nexport { Unzlib };\n/**\n * Asynchronous streaming Zlib decompression\n */\nvar AsyncUnzlib = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous Zlib decompression stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncUnzlib(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            zule,\n            function () { return [astrm, Inflate, Unzlib]; }\n        ], this, 0, function () {\n            var strm = new Unzlib();\n            onmessage = astrm(strm);\n        }, 11);\n    }\n    return AsyncUnzlib;\n}());\nexport { AsyncUnzlib };\nexport function unzlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bInflt,\n        zule,\n        function () { return [unzlibSync]; }\n    ], function (ev) { return pbf(unzlibSync(ev.data[0], gu8(ev.data[1]))); }, 5, cb);\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function unzlibSync(data, out) {\n    return inflt((zlv(data), data.subarray(2, -4)), out);\n}\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzip as compress, AsyncGzip as AsyncCompress };\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzipSync as compressSync, Gzip as Compress };\n/**\n * Streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar Decompress = /*#__PURE__*/ (function () {\n    /**\n     * Creates a decompression stream\n     * @param cb The callback to call whenever data is decompressed\n     */\n    function Decompress(cb) {\n        this.G = Gunzip;\n        this.I = Inflate;\n        this.Z = Unzlib;\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Decompress.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            throw 'no stream handler';\n        if (!this.s) {\n            if (this.p && this.p.length) {\n                var n = new u8(this.p.length + chunk.length);\n                n.set(this.p), n.set(chunk, this.p.length);\n            }\n            else\n                this.p = chunk;\n            if (this.p.length > 2) {\n                var _this_1 = this;\n                var cb = function () { _this_1.ondata.apply(_this_1, arguments); };\n                this.s = (this.p[0] == 31 && this.p[1] == 139 && this.p[2] == 8)\n                    ? new this.G(cb)\n                    : ((this.p[0] & 15) != 8 || (this.p[0] >> 4) > 7 || ((this.p[0] << 8 | this.p[1]) % 31))\n                        ? new this.I(cb)\n                        : new this.Z(cb);\n                this.s.push(this.p, final);\n                this.p = null;\n            }\n        }\n        else\n            this.s.push(chunk, final);\n    };\n    return Decompress;\n}());\nexport { Decompress };\n/**\n * Asynchronous streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar AsyncDecompress = /*#__PURE__*/ (function () {\n    /**\n   * Creates an asynchronous decompression stream\n   * @param cb The callback to call whenever data is decompressed\n   */\n    function AsyncDecompress(cb) {\n        this.G = AsyncGunzip;\n        this.I = AsyncInflate;\n        this.Z = AsyncUnzlib;\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncDecompress.prototype.push = function (chunk, final) {\n        Decompress.prototype.push.call(this, chunk, final);\n    };\n    return AsyncDecompress;\n}());\nexport { AsyncDecompress };\nexport function decompress(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzip(data, opts, cb)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflate(data, opts, cb)\n            : unzlib(data, opts, cb);\n}\n/**\n * Expands compressed GZIP, Zlib, or raw DEFLATE data, automatically detecting the format\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function decompressSync(data, out) {\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzipSync(data, out)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflateSync(data, out)\n            : unzlibSync(data, out);\n}\n// flatten a directory structure\nvar fltn = function (d, p, t, o) {\n    for (var k in d) {\n        var val = d[k], n = p + k;\n        if (val instanceof u8)\n            t[n] = [val, o];\n        else if (Array.isArray(val))\n            t[n] = [val[0], mrg(o, val[1])];\n        else\n            fltn(val, n + '/', t, o);\n    }\n};\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\nexport function strToU8(str, latin1) {\n    var l = str.length;\n    if (!latin1 && typeof TextEncoder != 'undefined')\n        return new TextEncoder().encode(str);\n    var ar = new u8(str.length + (str.length >>> 1));\n    var ai = 0;\n    var w = function (v) { ar[ai++] = v; };\n    for (var i = 0; i < l; ++i) {\n        if (ai + 5 > ar.length) {\n            var n = new u8(ai + 8 + ((l - i) << 1));\n            n.set(ar);\n            ar = n;\n        }\n        var c = str.charCodeAt(i);\n        if (c < 128 || latin1)\n            w(c);\n        else if (c < 2048)\n            w(192 | (c >>> 6)), w(128 | (c & 63));\n        else if (c > 55295 && c < 57344)\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\n                w(240 | (c >>> 18)), w(128 | ((c >>> 12) & 63)), w(128 | ((c >>> 6) & 63)), w(128 | (c & 63));\n        else\n            w(224 | (c >>> 12)), w(128 | ((c >>> 6) & 63)), w(128 | (c & 63));\n    }\n    return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\nexport function strFromU8(dat, latin1) {\n    var r = '';\n    if (!latin1 && typeof TextDecoder != 'undefined')\n        return new TextDecoder().decode(dat);\n    for (var i = 0; i < dat.length;) {\n        var c = dat[i++];\n        if (c < 128 || latin1)\n            r += String.fromCharCode(c);\n        else if (c < 224)\n            r += String.fromCharCode((c & 31) << 6 | (dat[i++] & 63));\n        else if (c < 240)\n            r += String.fromCharCode((c & 15) << 12 | (dat[i++] & 63) << 6 | (dat[i++] & 63));\n        else\n            c = ((c & 15) << 18 | (dat[i++] & 63) << 12 | (dat[i++] & 63) << 6 | (dat[i++] & 63)) - 65536,\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\n    }\n    return r;\n}\n;\n// skip local zip header\nvar slzh = function (d, b) { return b + 30 + b2(d, b + 26) + b2(d, b + 28); };\n// read zip header\nvar zh = function (d, b, z) {\n    var fnl = b2(d, b + 28), fn = strFromU8(d.subarray(b + 46, b + 46 + fnl), !(b2(d, b + 8) & 2048)), es = b + 46 + fnl;\n    var _a = z ? z64e(d, es) : [b4(d, b + 20), b4(d, b + 24), b4(d, b + 42)], sc = _a[0], su = _a[1], off = _a[2];\n    return [b2(d, b + 10), sc, su, fn, es + b2(d, b + 30) + b2(d, b + 32), off];\n};\n// read zip64 extra field\nvar z64e = function (d, b) {\n    for (; b2(d, b) != 1; b += 4 + b2(d, b + 2))\n        ;\n    return [b4(d, b + 12), b4(d, b + 4), b4(d, b + 20)];\n};\n// write zip header\nvar wzh = function (d, b, c, cmp, su, fn, u, o, ce, t) {\n    var fl = fn.length, l = cmp.length;\n    wbytes(d, b, ce != null ? 0x2014B50 : 0x4034B50), b += 4;\n    if (ce != null)\n        d[b] = 20, b += 2;\n    d[b] = 20, b += 2; // spec compliance? what's that?\n    d[b++] = (t == 8 && (o.level == 1 ? 6 : o.level < 6 ? 4 : o.level == 9 ? 2 : 0)), d[b++] = u && 8;\n    d[b] = t, b += 2;\n    var dt = new Date(o.mtime || Date.now()), y = dt.getFullYear() - 1980;\n    if (y < 0 || y > 119)\n        throw 'date not in range 1980-2099';\n    wbytes(d, b, ((y << 24) * 2) | ((dt.getMonth() + 1) << 21) | (dt.getDate() << 16) | (dt.getHours() << 11) | (dt.getMinutes() << 5) | (dt.getSeconds() >>> 1));\n    b += 4;\n    wbytes(d, b, c);\n    wbytes(d, b + 4, l);\n    wbytes(d, b + 8, su);\n    wbytes(d, b + 12, fl), b += 16; // skip extra field, comment\n    if (ce != null)\n        wbytes(d, b += 10, ce), b += 4;\n    d.set(fn, b);\n    b += fl;\n    if (ce == null)\n        d.set(cmp, b);\n};\n// write zip footer (end of central directory)\nvar wzf = function (o, b, c, d, e) {\n    wbytes(o, b, 0x6054B50); // skip disk\n    wbytes(o, b + 8, c);\n    wbytes(o, b + 10, c);\n    wbytes(o, b + 12, d);\n    wbytes(o, b + 16, e);\n};\nexport function zip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    var r = {};\n    fltn(data, '', r, opts);\n    var k = Object.keys(r);\n    var lft = k.length, o = 0, tot = 0;\n    var slft = lft, files = new Array(lft);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var cbf = function () {\n        var out = new u8(tot + 22), oe = o, cdl = tot - o;\n        tot = 0;\n        for (var i = 0; i < slft; ++i) {\n            var f = files[i];\n            try {\n                wzh(out, tot, f.c, f.d, f.m, f.n, f.u, f.p, null, f.t);\n                wzh(out, o, f.c, f.d, f.m, f.n, f.u, f.p, tot, f.t), o += 46 + f.n.length, tot += 30 + f.n.length + f.d.length;\n            }\n            catch (e) {\n                return cb(e, null);\n            }\n        }\n        wzf(out, o, files.length, cdl, oe);\n        cb(null, out);\n    };\n    if (!lft)\n        cbf();\n    var _loop_1 = function (i) {\n        var fn = k[i];\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var c = crc(), m = file.length;\n        c.p(file);\n        var n = strToU8(fn), s = n.length;\n        var t = p.level == 0 ? 0 : 8;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cb(e, null);\n            }\n            else {\n                var l = d.length;\n                files[i] = {\n                    t: t,\n                    d: d,\n                    m: m,\n                    c: c.d(),\n                    u: fn.length != l,\n                    n: n,\n                    p: p\n                };\n                o += 30 + s + l;\n                tot += 76 + 2 * s + l;\n                if (!--lft)\n                    cbf();\n            }\n        };\n        if (n.length > 65535)\n            cbl('filename too long', null);\n        if (!t)\n            cbl(null, file);\n        else if (m < 160000) {\n            try {\n                cbl(null, deflateSync(file, p));\n            }\n            catch (e) {\n                cbl(e, null);\n            }\n        }\n        else\n            term.push(deflate(file, p, cbl));\n    };\n    // Cannot use lft because it can decrease\n    for (var i = 0; i < slft; ++i) {\n        _loop_1(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously creates a ZIP file. Prefer using `zip` for better performance\n * with more than one file.\n * @param data The directory structure for the ZIP archive\n * @param opts The main options, merged with per-file options\n * @returns The generated ZIP archive\n */\nexport function zipSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    var r = {};\n    var files = [];\n    fltn(data, '', r, opts);\n    var o = 0;\n    var tot = 0;\n    for (var fn in r) {\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var t = p.level == 0 ? 0 : 8;\n        var n = strToU8(fn), s = n.length;\n        if (n.length > 65535)\n            throw 'filename too long';\n        var d = t ? deflateSync(file, p) : file, l = d.length;\n        var c = crc();\n        c.p(file);\n        files.push({\n            t: t,\n            d: d,\n            m: file.length,\n            c: c.d(),\n            u: fn.length != s,\n            n: n,\n            o: o,\n            p: p\n        });\n        o += 30 + s + l;\n        tot += 76 + 2 * s + l;\n    }\n    var out = new u8(tot + 22), oe = o, cdl = tot - o;\n    for (var i = 0; i < files.length; ++i) {\n        var f = files[i];\n        wzh(out, f.o, f.c, f.d, f.m, f.n, f.u, f.p, null, f.t);\n        wzh(out, o, f.c, f.d, f.m, f.n, f.u, f.p, f.o, f.t), o += 46 + f.n.length;\n    }\n    wzf(out, o, files.length, cdl, oe);\n    return out;\n}\n/**\n * Asynchronously decompresses a ZIP archive\n * @param data The raw compressed ZIP file\n * @param cb The callback to call with the decompressed files\n * @returns A function that can be used to immediately terminate the unzipping\n */\nexport function unzip(data, cb) {\n    if (typeof cb != 'function')\n        throw 'no callback';\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558) {\n            cb('invalid zip file', null);\n            return;\n        }\n    }\n    ;\n    var lft = b2(data, e + 8);\n    if (!lft)\n        cb(null, {});\n    var c = lft;\n    var o = b4(data, e + 16);\n    var z = o == 4294967295;\n    if (z) {\n        e = b4(data, e - 12);\n        if (b4(data, e) != 0x6064B50)\n            throw 'invalid zip file';\n        c = lft = b4(data, e + 32);\n        o = b4(data, e + 48);\n    }\n    var _loop_2 = function (i) {\n        var _a = zh(data, o, z), c_1 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cb(e, null);\n            }\n            else {\n                files[fn] = d;\n                if (!--lft)\n                    cb(null, files);\n            }\n        };\n        if (!c_1)\n            cbl(null, slc(data, b, b + sc));\n        else if (c_1 == 8) {\n            var infl = data.subarray(b, b + sc);\n            if (sc < 320000) {\n                try {\n                    cbl(null, inflateSync(infl, new u8(su)));\n                }\n                catch (e) {\n                    cbl(e, null);\n                }\n            }\n            else\n                term.push(inflate(infl, { size: su }, cbl));\n        }\n        else\n            cbl('unknown compression type ' + c_1, null);\n    };\n    for (var i = 0; i < c; ++i) {\n        _loop_2(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously decompresses a ZIP archive. Prefer using `unzip` for better\n * performance with more than one file.\n * @param data The raw compressed ZIP file\n * @returns The decompressed files\n */\nexport function unzipSync(data) {\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558)\n            throw 'invalid zip file';\n    }\n    ;\n    var c = b2(data, e + 8);\n    if (!c)\n        return {};\n    var o = b4(data, e + 16);\n    var z = o == 4294967295;\n    if (z) {\n        e = b4(data, e - 12);\n        if (b4(data, e) != 0x6064B50)\n            throw 'invalid zip file';\n        c = b4(data, e + 32);\n        o = b4(data, e + 48);\n    }\n    for (var i = 0; i < c; ++i) {\n        var _a = zh(data, o, z), c_2 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        if (!c_2)\n            files[fn] = slc(data, b, b + sc);\n        else if (c_2 == 8)\n            files[fn] = inflateSync(data.subarray(b, b + sc), new u8(su));\n        else\n            throw 'unknown compression type ' + c_2;\n    }\n    return files;\n}\n","// Generated by CoffeeScript 1.4.0\n\n/**\n * @license\n * PNG.js\n * Copyright (c) 2011 Devon Govett\n * MIT LICENSE\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this\n * software and associated documentation files (the \"Software\"), to deal in the Software\n * without restriction, including without limitation the rights to use, copy, modify, merge,\n * publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons\n * to whom the Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all copies or\n * substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING\n * BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport { unzlibSync } from \"./fflate.js\";\nimport { globalObject } from \"./globalObject.js\";\n\nvar PNG = (function() {\n  var APNG_BLEND_OP_OVER,\n    APNG_BLEND_OP_SOURCE,\n    APNG_DISPOSE_OP_BACKGROUND,\n    APNG_DISPOSE_OP_NONE,\n    APNG_DISPOSE_OP_PREVIOUS,\n    makeImage,\n    scratchCanvas,\n    scratchCtx;\n\n  APNG_DISPOSE_OP_NONE = 0;\n\n  APNG_DISPOSE_OP_BACKGROUND = 1;\n\n  APNG_DISPOSE_OP_PREVIOUS = 2;\n\n  APNG_BLEND_OP_SOURCE = 0;\n\n  APNG_BLEND_OP_OVER = 1;\n\n  function PNG(data) {\n    var chunkSize,\n      colors,\n      palLen,\n      delayDen,\n      delayNum,\n      frame,\n      i,\n      index,\n      key,\n      section,\n      palShort,\n      text,\n      _i,\n      _j,\n      _ref;\n    this.data = data;\n    this.pos = 8;\n    this.palette = [];\n    this.imgData = [];\n    this.transparency = {};\n    this.animation = null;\n    this.text = {};\n    frame = null;\n    while (true) {\n      chunkSize = this.readUInt32();\n      section = function() {\n        var _i, _results;\n        _results = [];\n        for (i = _i = 0; _i < 4; i = ++_i) {\n          _results.push(String.fromCharCode(this.data[this.pos++]));\n        }\n        return _results;\n      }\n        .call(this)\n        .join(\"\");\n      switch (section) {\n        case \"IHDR\":\n          this.width = this.readUInt32();\n          this.height = this.readUInt32();\n          this.bits = this.data[this.pos++];\n          this.colorType = this.data[this.pos++];\n          this.compressionMethod = this.data[this.pos++];\n          this.filterMethod = this.data[this.pos++];\n          this.interlaceMethod = this.data[this.pos++];\n          break;\n        case \"acTL\":\n          this.animation = {\n            numFrames: this.readUInt32(),\n            numPlays: this.readUInt32() || Infinity,\n            frames: []\n          };\n          break;\n        case \"PLTE\":\n          this.palette = this.read(chunkSize);\n          break;\n        case \"fcTL\":\n          if (frame) {\n            this.animation.frames.push(frame);\n          }\n          this.pos += 4;\n          frame = {\n            width: this.readUInt32(),\n            height: this.readUInt32(),\n            xOffset: this.readUInt32(),\n            yOffset: this.readUInt32()\n          };\n          delayNum = this.readUInt16();\n          delayDen = this.readUInt16() || 100;\n          frame.delay = (1000 * delayNum) / delayDen;\n          frame.disposeOp = this.data[this.pos++];\n          frame.blendOp = this.data[this.pos++];\n          frame.data = [];\n          break;\n        case \"IDAT\":\n        case \"fdAT\":\n          if (section === \"fdAT\") {\n            this.pos += 4;\n            chunkSize -= 4;\n          }\n          data = (frame != null ? frame.data : void 0) || this.imgData;\n          for (\n            i = _i = 0;\n            0 <= chunkSize ? _i < chunkSize : _i > chunkSize;\n            i = 0 <= chunkSize ? ++_i : --_i\n          ) {\n            data.push(this.data[this.pos++]);\n          }\n          break;\n        case \"tRNS\":\n          this.transparency = {};\n          switch (this.colorType) {\n            case 3:\n              palLen = this.palette.length / 3;\n              this.transparency.indexed = this.read(chunkSize);\n              if (this.transparency.indexed.length > palLen)\n                throw new Error(\"More transparent colors than palette size\");\n              /*\n               * According to the PNG spec trns should be increased to the same size as palette if shorter\n               */\n              //palShort = 255 - this.transparency.indexed.length;\n              palShort = palLen - this.transparency.indexed.length;\n              if (palShort > 0) {\n                for (\n                  i = _j = 0;\n                  0 <= palShort ? _j < palShort : _j > palShort;\n                  i = 0 <= palShort ? ++_j : --_j\n                ) {\n                  this.transparency.indexed.push(255);\n                }\n              }\n              break;\n            case 0:\n              this.transparency.grayscale = this.read(chunkSize)[0];\n              break;\n            case 2:\n              this.transparency.rgb = this.read(chunkSize);\n          }\n          break;\n        case \"tEXt\":\n          text = this.read(chunkSize);\n          index = text.indexOf(0);\n          key = String.fromCharCode.apply(String, text.slice(0, index));\n          this.text[key] = String.fromCharCode.apply(\n            String,\n            text.slice(index + 1)\n          );\n          break;\n        case \"IEND\":\n          if (frame) {\n            this.animation.frames.push(frame);\n          }\n          this.colors = function() {\n            switch (this.colorType) {\n              case 0:\n              case 3:\n              case 4:\n                return 1;\n              case 2:\n              case 6:\n                return 3;\n            }\n          }.call(this);\n          this.hasAlphaChannel = (_ref = this.colorType) === 4 || _ref === 6;\n          colors = this.colors + (this.hasAlphaChannel ? 1 : 0);\n          this.pixelBitlength = this.bits * colors;\n          this.colorSpace = function() {\n            switch (this.colors) {\n              case 1:\n                return \"DeviceGray\";\n              case 3:\n                return \"DeviceRGB\";\n            }\n          }.call(this);\n          this.imgData = new Uint8Array(this.imgData);\n          return;\n        default:\n          this.pos += chunkSize;\n      }\n      this.pos += 4;\n      if (this.pos > this.data.length) {\n        throw new Error(\"Incomplete or corrupt PNG file\");\n      }\n    }\n  }\n\n  PNG.prototype.read = function(bytes) {\n    var i, _i, _results;\n    _results = [];\n    for (\n      i = _i = 0;\n      0 <= bytes ? _i < bytes : _i > bytes;\n      i = 0 <= bytes ? ++_i : --_i\n    ) {\n      _results.push(this.data[this.pos++]);\n    }\n    return _results;\n  };\n\n  PNG.prototype.readUInt32 = function() {\n    var b1, b2, b3, b4;\n    b1 = this.data[this.pos++] << 24;\n    b2 = this.data[this.pos++] << 16;\n    b3 = this.data[this.pos++] << 8;\n    b4 = this.data[this.pos++];\n    return b1 | b2 | b3 | b4;\n  };\n\n  PNG.prototype.readUInt16 = function() {\n    var b1, b2;\n    b1 = this.data[this.pos++] << 8;\n    b2 = this.data[this.pos++];\n    return b1 | b2;\n  };\n\n  PNG.prototype.decodePixels = function(data) {\n    var pixelBytes = this.pixelBitlength / 8;\n    var fullPixels = new Uint8Array(this.width * this.height * pixelBytes);\n    var pos = 0;\n    var _this = this;\n\n    if (data == null) {\n      data = this.imgData;\n    }\n    if (data.length === 0) {\n      return new Uint8Array(0);\n    }\n\n    data = unzlibSync(data);\n    function pass(x0, y0, dx, dy) {\n      var abyte,\n        c,\n        col,\n        i,\n        left,\n        length,\n        p,\n        pa,\n        paeth,\n        pb,\n        pc,\n        pixels,\n        row,\n        scanlineLength,\n        upper,\n        upperLeft,\n        _i,\n        _j,\n        _k,\n        _l,\n        _m;\n      var w = Math.ceil((_this.width - x0) / dx),\n        h = Math.ceil((_this.height - y0) / dy);\n      var isFull = _this.width == w && _this.height == h;\n      scanlineLength = pixelBytes * w;\n      pixels = isFull ? fullPixels : new Uint8Array(scanlineLength * h);\n      length = data.length;\n      row = 0;\n      c = 0;\n      while (row < h && pos < length) {\n        switch (data[pos++]) {\n          case 0:\n            for (i = _i = 0; _i < scanlineLength; i = _i += 1) {\n              pixels[c++] = data[pos++];\n            }\n            break;\n          case 1:\n            for (i = _j = 0; _j < scanlineLength; i = _j += 1) {\n              abyte = data[pos++];\n              left = i < pixelBytes ? 0 : pixels[c - pixelBytes];\n              pixels[c++] = (abyte + left) % 256;\n            }\n            break;\n          case 2:\n            for (i = _k = 0; _k < scanlineLength; i = _k += 1) {\n              abyte = data[pos++];\n              col = (i - (i % pixelBytes)) / pixelBytes;\n              upper =\n                row &&\n                pixels[\n                  (row - 1) * scanlineLength +\n                    col * pixelBytes +\n                    (i % pixelBytes)\n                ];\n              pixels[c++] = (upper + abyte) % 256;\n            }\n            break;\n          case 3:\n            for (i = _l = 0; _l < scanlineLength; i = _l += 1) {\n              abyte = data[pos++];\n              col = (i - (i % pixelBytes)) / pixelBytes;\n              left = i < pixelBytes ? 0 : pixels[c - pixelBytes];\n              upper =\n                row &&\n                pixels[\n                  (row - 1) * scanlineLength +\n                    col * pixelBytes +\n                    (i % pixelBytes)\n                ];\n              pixels[c++] = (abyte + Math.floor((left + upper) / 2)) % 256;\n            }\n            break;\n          case 4:\n            for (i = _m = 0; _m < scanlineLength; i = _m += 1) {\n              abyte = data[pos++];\n              col = (i - (i % pixelBytes)) / pixelBytes;\n              left = i < pixelBytes ? 0 : pixels[c - pixelBytes];\n              if (row === 0) {\n                upper = upperLeft = 0;\n              } else {\n                upper =\n                  pixels[\n                    (row - 1) * scanlineLength +\n                      col * pixelBytes +\n                      (i % pixelBytes)\n                  ];\n                upperLeft =\n                  col &&\n                  pixels[\n                    (row - 1) * scanlineLength +\n                      (col - 1) * pixelBytes +\n                      (i % pixelBytes)\n                  ];\n              }\n              p = left + upper - upperLeft;\n              pa = Math.abs(p - left);\n              pb = Math.abs(p - upper);\n              pc = Math.abs(p - upperLeft);\n              if (pa <= pb && pa <= pc) {\n                paeth = left;\n              } else if (pb <= pc) {\n                paeth = upper;\n              } else {\n                paeth = upperLeft;\n              }\n              pixels[c++] = (abyte + paeth) % 256;\n            }\n            break;\n          default:\n            throw new Error(\"Invalid filter algorithm: \" + data[pos - 1]);\n        }\n        if (!isFull) {\n          var fullPos = ((y0 + row * dy) * _this.width + x0) * pixelBytes;\n          var partPos = row * scanlineLength;\n          for (i = 0; i < w; i += 1) {\n            for (var j = 0; j < pixelBytes; j += 1)\n              fullPixels[fullPos++] = pixels[partPos++];\n            fullPos += (dx - 1) * pixelBytes;\n          }\n        }\n        row++;\n      }\n    }\n    if (_this.interlaceMethod == 1) {\n      /*\n          1 6 4 6 2 6 4 6\n          7 7 7 7 7 7 7 7\n          5 6 5 6 5 6 5 6\n          7 7 7 7 7 7 7 7\n          3 6 4 6 3 6 4 6\n          7 7 7 7 7 7 7 7\n          5 6 5 6 5 6 5 6\n          7 7 7 7 7 7 7 7\n        */\n      pass(0, 0, 8, 8); // 1\n      /* NOTE these seem to follow the pattern:\n       * pass(x, 0, 2*x, 2*x);\n       * pass(0, x,   x, 2*x);\n       * with x being 4, 2, 1.\n       */\n      pass(4, 0, 8, 8); // 2\n      pass(0, 4, 4, 8); // 3\n\n      pass(2, 0, 4, 4); // 4\n      pass(0, 2, 2, 4); // 5\n\n      pass(1, 0, 2, 2); // 6\n      pass(0, 1, 1, 2); // 7\n    } else {\n      pass(0, 0, 1, 1);\n    }\n    return fullPixels;\n  };\n\n  PNG.prototype.decodePalette = function() {\n    var c, i, length, palette, pos, ret, transparency, _i, _ref, _ref1;\n    palette = this.palette;\n    transparency = this.transparency.indexed || [];\n    ret = new Uint8Array((transparency.length || 0) + palette.length);\n    pos = 0;\n    length = palette.length;\n    c = 0;\n    for (i = _i = 0, _ref = length; _i < _ref; i = _i += 3) {\n      ret[pos++] = palette[i];\n      ret[pos++] = palette[i + 1];\n      ret[pos++] = palette[i + 2];\n      ret[pos++] = (_ref1 = transparency[c++]) != null ? _ref1 : 255;\n    }\n    return ret;\n  };\n\n  PNG.prototype.copyToImageData = function(imageData, pixels) {\n    var alpha, colors, data, i, input, j, k, length, palette, v, _ref;\n    colors = this.colors;\n    palette = null;\n    alpha = this.hasAlphaChannel;\n    if (this.palette.length) {\n      palette =\n        (_ref = this._decodedPalette) != null\n          ? _ref\n          : (this._decodedPalette = this.decodePalette());\n      colors = 4;\n      alpha = true;\n    }\n    data = imageData.data || imageData;\n    length = data.length;\n    input = palette || pixels;\n    i = j = 0;\n    if (colors === 1) {\n      while (i < length) {\n        k = palette ? pixels[i / 4] * 4 : j;\n        v = input[k++];\n        data[i++] = v;\n        data[i++] = v;\n        data[i++] = v;\n        data[i++] = alpha ? input[k++] : 255;\n        j = k;\n      }\n    } else {\n      while (i < length) {\n        k = palette ? pixels[i / 4] * 4 : j;\n        data[i++] = input[k++];\n        data[i++] = input[k++];\n        data[i++] = input[k++];\n        data[i++] = alpha ? input[k++] : 255;\n        j = k;\n      }\n    }\n  };\n\n  PNG.prototype.decode = function() {\n    var ret;\n    ret = new Uint8Array(this.width * this.height * 4);\n    this.copyToImageData(ret, this.decodePixels());\n    return ret;\n  };\n\n  var hasBrowserCanvas = function() {\n    if (Object.prototype.toString.call(globalObject) === \"[object Window]\") {\n      try {\n        scratchCanvas = globalObject.document.createElement(\"canvas\");\n        scratchCtx = scratchCanvas.getContext(\"2d\");\n      } catch (e) {\n        return false;\n      }\n      return true;\n    }\n    return false;\n  };\n\n  hasBrowserCanvas();\n\n  makeImage = function(imageData) {\n    if (hasBrowserCanvas() === true) {\n      var img;\n      scratchCtx.width = imageData.width;\n      scratchCtx.height = imageData.height;\n      scratchCtx.clearRect(0, 0, imageData.width, imageData.height);\n      scratchCtx.putImageData(imageData, 0, 0);\n      img = new Image();\n      img.src = scratchCanvas.toDataURL();\n      return img;\n    }\n    throw new Error(\"This method requires a Browser with Canvas-capability.\");\n  };\n\n  PNG.prototype.decodeFrames = function(ctx) {\n    var frame, i, imageData, pixels, _i, _len, _ref, _results;\n    if (!this.animation) {\n      return;\n    }\n    _ref = this.animation.frames;\n    _results = [];\n    for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {\n      frame = _ref[i];\n      imageData = ctx.createImageData(frame.width, frame.height);\n      pixels = this.decodePixels(new Uint8Array(frame.data));\n      this.copyToImageData(imageData, pixels);\n      frame.imageData = imageData;\n      _results.push((frame.image = makeImage(imageData)));\n    }\n    return _results;\n  };\n\n  PNG.prototype.renderFrame = function(ctx, number) {\n    var frame, frames, prev;\n    frames = this.animation.frames;\n    frame = frames[number];\n    prev = frames[number - 1];\n    if (number === 0) {\n      ctx.clearRect(0, 0, this.width, this.height);\n    }\n    if (\n      (prev != null ? prev.disposeOp : void 0) === APNG_DISPOSE_OP_BACKGROUND\n    ) {\n      ctx.clearRect(prev.xOffset, prev.yOffset, prev.width, prev.height);\n    } else if (\n      (prev != null ? prev.disposeOp : void 0) === APNG_DISPOSE_OP_PREVIOUS\n    ) {\n      ctx.putImageData(prev.imageData, prev.xOffset, prev.yOffset);\n    }\n    if (frame.blendOp === APNG_BLEND_OP_SOURCE) {\n      ctx.clearRect(frame.xOffset, frame.yOffset, frame.width, frame.height);\n    }\n    return ctx.drawImage(frame.image, frame.xOffset, frame.yOffset);\n  };\n\n  PNG.prototype.animate = function(ctx) {\n    var doFrame,\n      frameNumber,\n      frames,\n      numFrames,\n      numPlays,\n      _ref,\n      _this = this;\n    frameNumber = 0;\n    (_ref = this.animation),\n      (numFrames = _ref.numFrames),\n      (frames = _ref.frames),\n      (numPlays = _ref.numPlays);\n    return (doFrame = function() {\n      var f, frame;\n      f = frameNumber++ % numFrames;\n      frame = frames[f];\n      _this.renderFrame(ctx, f);\n      if (numFrames > 1 && frameNumber / numFrames < numPlays) {\n        return (_this.animation._timeout = setTimeout(doFrame, frame.delay));\n      }\n    })();\n  };\n\n  PNG.prototype.stopAnimation = function() {\n    var _ref;\n    return clearTimeout(\n      (_ref = this.animation) != null ? _ref._timeout : void 0\n    );\n  };\n\n  PNG.prototype.render = function(canvas) {\n    var ctx, data;\n    if (canvas._png) {\n      canvas._png.stopAnimation();\n    }\n    canvas._png = this;\n    canvas.width = this.width;\n    canvas.height = this.height;\n    ctx = canvas.getContext(\"2d\");\n    if (this.animation) {\n      this.decodeFrames(ctx);\n      return this.animate(ctx);\n    } else {\n      data = ctx.createImageData(this.width, this.height);\n      this.copyToImageData(data, this.decodePixels());\n      return ctx.putImageData(data, 0, 0);\n    }\n  };\n\n  return PNG;\n})();\n\nexport { PNG };\n","/**\n * @license\n *\n * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n * ====================================================================\n */\n\nimport { jsPDF } from \"../jspdf.js\";\nimport { PNG } from \"../libs/png.js\";\n\n/**\n * jsPDF PNG PlugIn\n * @name png_support\n * @module\n */\n(function(jsPDFAPI) {\n  \"use strict\";\n\n  /*\n   * @see http://www.w3.org/TR/PNG-Chunks.html\n   *\n   Color    Allowed      Interpretation\n   Type     Bit Depths\n\n     0       1,2,4,8,16  Each pixel is a grayscale sample.\n\n     2       8,16        Each pixel is an R,G,B triple.\n\n     3       1,2,4,8     Each pixel is a palette index;\n                         a PLTE chunk must appear.\n\n     4       8,16        Each pixel is a grayscale sample,\n                         followed by an alpha sample.\n\n     6       8,16        Each pixel is an R,G,B triple,\n                         followed by an alpha sample.\n  */\n\n  /*\n   * PNG filter method types\n   *\n   * @see http://www.w3.org/TR/PNG-Filters.html\n   * @see http://www.libpng.org/pub/png/book/chapter09.html\n   *\n   * This is what the value 'Predictor' in decode params relates to\n   *\n   * 15 is \"optimal prediction\", which means the prediction algorithm can change from line to line.\n   * In that case, you actually have to read the first byte off each line for the prediction algorthim (which should be 0-4, corresponding to PDF 10-14) and select the appropriate unprediction algorithm based on that byte.\n   *\n     0       None\n     1       Sub\n     2       Up\n     3       Average\n     4       Paeth\n   */\n\n  var canCompress = function(value) {\n    return value !== jsPDFAPI.image_compression.NONE && hasCompressionJS();\n  };\n\n  var hasCompressionJS = function() {\n    return typeof zlibSync === \"function\";\n  };\n  var compressBytes = function(bytes, lineLength, colorsPerPixel, compression) {\n    var level = 4;\n    var filter_method = filterUp;\n\n    switch (compression) {\n      case jsPDFAPI.image_compression.FAST:\n        level = 1;\n        filter_method = filterSub;\n        break;\n\n      case jsPDFAPI.image_compression.MEDIUM:\n        level = 6;\n        filter_method = filterAverage;\n        break;\n\n      case jsPDFAPI.image_compression.SLOW:\n        level = 9;\n        filter_method = filterPaeth;\n        break;\n    }\n\n    bytes = applyPngFilterMethod(\n      bytes,\n      lineLength,\n      colorsPerPixel,\n      filter_method\n    );\n    var dat = zlibSync(bytes, { level: level });\n    return jsPDFAPI.__addimage__.arrayBufferToBinaryString(dat);\n  };\n\n  var applyPngFilterMethod = function(\n    bytes,\n    lineLength,\n    colorsPerPixel,\n    filter_method\n  ) {\n    var lines = bytes.length / lineLength,\n      result = new Uint8Array(bytes.length + lines),\n      filter_methods = getFilterMethods(),\n      line,\n      prevLine,\n      offset;\n\n    for (var i = 0; i < lines; i += 1) {\n      offset = i * lineLength;\n      line = bytes.subarray(offset, offset + lineLength);\n\n      if (filter_method) {\n        result.set(filter_method(line, colorsPerPixel, prevLine), offset + i);\n      } else {\n        var len = filter_methods.length,\n          results = [];\n\n        for (var j; j < len; j += 1) {\n          results[j] = filter_methods[j](line, colorsPerPixel, prevLine);\n        }\n\n        var ind = getIndexOfSmallestSum(results.concat());\n\n        result.set(results[ind], offset + i);\n      }\n\n      prevLine = line;\n    }\n\n    return result;\n  };\n\n  var filterNone = function(line) {\n    /*var result = new Uint8Array(line.length + 1);\n    result[0] = 0;\n    result.set(line, 1);*/\n\n    var result = Array.apply([], line);\n    result.unshift(0);\n\n    return result;\n  };\n\n  var filterSub = function(line, colorsPerPixel) {\n    var result = [],\n      len = line.length,\n      left;\n\n    result[0] = 1;\n\n    for (var i = 0; i < len; i += 1) {\n      left = line[i - colorsPerPixel] || 0;\n      result[i + 1] = (line[i] - left + 0x0100) & 0xff;\n    }\n\n    return result;\n  };\n\n  var filterUp = function(line, colorsPerPixel, prevLine) {\n    var result = [],\n      len = line.length,\n      up;\n\n    result[0] = 2;\n\n    for (var i = 0; i < len; i += 1) {\n      up = (prevLine && prevLine[i]) || 0;\n      result[i + 1] = (line[i] - up + 0x0100) & 0xff;\n    }\n\n    return result;\n  };\n\n  var filterAverage = function(line, colorsPerPixel, prevLine) {\n    var result = [],\n      len = line.length,\n      left,\n      up;\n\n    result[0] = 3;\n\n    for (var i = 0; i < len; i += 1) {\n      left = line[i - colorsPerPixel] || 0;\n      up = (prevLine && prevLine[i]) || 0;\n      result[i + 1] = (line[i] + 0x0100 - ((left + up) >>> 1)) & 0xff;\n    }\n\n    return result;\n  };\n\n  var filterPaeth = function(line, colorsPerPixel, prevLine) {\n    var result = [],\n      len = line.length,\n      left,\n      up,\n      upLeft,\n      paeth;\n\n    result[0] = 4;\n\n    for (var i = 0; i < len; i += 1) {\n      left = line[i - colorsPerPixel] || 0;\n      up = (prevLine && prevLine[i]) || 0;\n      upLeft = (prevLine && prevLine[i - colorsPerPixel]) || 0;\n      paeth = paethPredictor(left, up, upLeft);\n      result[i + 1] = (line[i] - paeth + 0x0100) & 0xff;\n    }\n\n    return result;\n  };\n\n  var paethPredictor = function(left, up, upLeft) {\n    if (left === up && up === upLeft) {\n      return left;\n    }\n    var pLeft = Math.abs(up - upLeft),\n      pUp = Math.abs(left - upLeft),\n      pUpLeft = Math.abs(left + up - upLeft - upLeft);\n    return pLeft <= pUp && pLeft <= pUpLeft\n      ? left\n      : pUp <= pUpLeft\n      ? up\n      : upLeft;\n  };\n\n  var getFilterMethods = function() {\n    return [filterNone, filterSub, filterUp, filterAverage, filterPaeth];\n  };\n\n  var getIndexOfSmallestSum = function(arrays) {\n    var sum = arrays.map(function(value) {\n      return value.reduce(function(pv, cv) {\n        return pv + Math.abs(cv);\n      }, 0);\n    });\n    return sum.indexOf(Math.min.apply(null, sum));\n  };\n\n  var getPredictorFromCompression = function(compression) {\n    var predictor;\n    switch (compression) {\n      case jsPDFAPI.image_compression.FAST:\n        predictor = 11;\n        break;\n\n      case jsPDFAPI.image_compression.MEDIUM:\n        predictor = 13;\n        break;\n\n      case jsPDFAPI.image_compression.SLOW:\n        predictor = 14;\n        break;\n\n      default:\n        predictor = 12;\n        break;\n    }\n    return predictor;\n  };\n\n  /**\n   * @name processPNG\n   * @function\n   * @ignore\n   */\n  jsPDFAPI.processPNG = function(imageData, index, alias, compression) {\n    \"use strict\";\n\n    var colorSpace,\n      filter = this.decode.FLATE_DECODE,\n      bitsPerComponent,\n      image,\n      decodeParameters = \"\",\n      trns,\n      colors,\n      pal,\n      smask,\n      pixels,\n      len,\n      alphaData,\n      imgData,\n      hasColors,\n      pixel,\n      i,\n      n;\n\n    if (this.__addimage__.isArrayBuffer(imageData))\n      imageData = new Uint8Array(imageData);\n\n    if (this.__addimage__.isArrayBufferView(imageData)) {\n      image = new PNG(imageData);\n      imageData = image.imgData;\n      bitsPerComponent = image.bits;\n      colorSpace = image.colorSpace;\n      colors = image.colors;\n\n      /*\n       * colorType 6 - Each pixel is an R,G,B triple, followed by an alpha sample.\n       *\n       * colorType 4 - Each pixel is a grayscale sample, followed by an alpha sample.\n       *\n       * Extract alpha to create two separate images, using the alpha as a sMask\n       */\n      if ([4, 6].indexOf(image.colorType) !== -1) {\n        /*\n         * processes 8 bit RGBA and grayscale + alpha images\n         */\n        if (image.bits === 8) {\n          pixels =\n            image.pixelBitlength == 32\n              ? new Uint32Array(image.decodePixels().buffer)\n              : image.pixelBitlength == 16\n              ? new Uint16Array(image.decodePixels().buffer)\n              : new Uint8Array(image.decodePixels().buffer);\n          len = pixels.length;\n          imgData = new Uint8Array(len * image.colors);\n          alphaData = new Uint8Array(len);\n          var pDiff = image.pixelBitlength - image.bits;\n          i = 0;\n          n = 0;\n          var pbl;\n\n          for (; i < len; i++) {\n            pixel = pixels[i];\n            pbl = 0;\n\n            while (pbl < pDiff) {\n              imgData[n++] = (pixel >>> pbl) & 0xff;\n              pbl = pbl + image.bits;\n            }\n\n            alphaData[i] = (pixel >>> pbl) & 0xff;\n          }\n        }\n\n        /*\n         * processes 16 bit RGBA and grayscale + alpha images\n         */\n        if (image.bits === 16) {\n          pixels = new Uint32Array(image.decodePixels().buffer);\n          len = pixels.length;\n          imgData = new Uint8Array(\n            len * (32 / image.pixelBitlength) * image.colors\n          );\n          alphaData = new Uint8Array(len * (32 / image.pixelBitlength));\n          hasColors = image.colors > 1;\n          i = 0;\n          n = 0;\n          var a = 0;\n\n          while (i < len) {\n            pixel = pixels[i++];\n\n            imgData[n++] = (pixel >>> 0) & 0xff;\n\n            if (hasColors) {\n              imgData[n++] = (pixel >>> 16) & 0xff;\n\n              pixel = pixels[i++];\n              imgData[n++] = (pixel >>> 0) & 0xff;\n            }\n\n            alphaData[a++] = (pixel >>> 16) & 0xff;\n          }\n          bitsPerComponent = 8;\n        }\n\n        if (canCompress(compression)) {\n          imageData = compressBytes(\n            imgData,\n            image.width * image.colors,\n            image.colors,\n            compression\n          );\n          smask = compressBytes(alphaData, image.width, 1, compression);\n        } else {\n          imageData = imgData;\n          smask = alphaData;\n          filter = undefined;\n        }\n      }\n\n      /*\n       * Indexed png. Each pixel is a palette index.\n       */\n      if (image.colorType === 3) {\n        colorSpace = this.color_spaces.INDEXED;\n        pal = image.palette;\n\n        if (image.transparency.indexed) {\n          var trans = image.transparency.indexed;\n          var total = 0;\n          i = 0;\n          len = trans.length;\n\n          for (; i < len; ++i) {\n            total += trans[i];\n          }\n\n          total = total / 255;\n\n          /*\n           * a single color is specified as 100% transparent (0),\n           * so we set trns to use a /Mask with that index\n           */\n          if (total === len - 1 && trans.indexOf(0) !== -1) {\n            trns = [trans.indexOf(0)];\n\n            /*\n             * there's more than one colour within the palette that specifies\n             * a transparency value less than 255, so we unroll the pixels to create an image sMask\n             */\n          } else if (total !== len) {\n            pixels = image.decodePixels();\n            alphaData = new Uint8Array(pixels.length);\n            i = 0;\n            len = pixels.length;\n\n            for (; i < len; i++) {\n              alphaData[i] = trans[pixels[i]];\n            }\n\n            smask = compressBytes(alphaData, image.width, 1);\n          }\n        }\n      }\n\n      var predictor = getPredictorFromCompression(compression);\n\n      if (filter === this.decode.FLATE_DECODE) {\n        decodeParameters = \"/Predictor \" + predictor + \" \";\n      }\n      decodeParameters +=\n        \"/Colors \" +\n        colors +\n        \" /BitsPerComponent \" +\n        bitsPerComponent +\n        \" /Columns \" +\n        image.width;\n\n      if (\n        this.__addimage__.isArrayBuffer(imageData) ||\n        this.__addimage__.isArrayBufferView(imageData)\n      ) {\n        imageData = this.__addimage__.arrayBufferToBinaryString(imageData);\n      }\n\n      if (\n        (smask && this.__addimage__.isArrayBuffer(smask)) ||\n        this.__addimage__.isArrayBufferView(smask)\n      ) {\n        smask = this.__addimage__.arrayBufferToBinaryString(smask);\n      }\n\n      return {\n        alias: alias,\n        data: imageData,\n        index: index,\n        filter: filter,\n        decodeParameters: decodeParameters,\n        transparency: trns,\n        palette: pal,\n        sMask: smask,\n        predictor: predictor,\n        width: image.width,\n        height: image.height,\n        bitsPerComponent: bitsPerComponent,\n        colorSpace: colorSpace\n      };\n    }\n  };\n})(jsPDF.API);\n","import { jsPDF } from \"./jspdf.js\";\nimport \"./modules/addimage.js\";\nimport \"./modules/png_support.js\";\n\nexport function png2pdf(config) {\n    var doc = new jsPDF({ format: [config.pageWidth, config.pageHeight] });\n    for (var i = 0, iLen = config.pages.length; i < iLen; i++ ) {\n        var images = config.pages[i];\n        for (var p = 0, pLen = images.length; p < pLen; p++ ) {\n            var image = images[p];\n            doc.addImage(image.dataUrl, \"PNG\", image.x, image.y, image.w, image.h);\n        }\n        if (i < iLen - 1) {\n            doc.addPage();\n        }\n    }\n    return doc.output(\"arraybuffer\");\n}\n"],"names":["globalObject","window","global","self","atob","btoa","bind","consoleLog","console","log","apply","arguments","consoleWarn","str","warn","call","consoleError","error","PubSub","context","Error","topics","subscribe","topic","callback","once","hasOwnProperty","token","Math","random","toString","unsubscribe","Object","keys","length","publish","args","Array","prototype","slice","tokens","sub","ex","message","push","forEach","getTopics","jsPDF","options","orientation","unit","format","compressPdf","filters","userUnit","precision","floatPrecision","compress","abs","toLowerCase","API","internal","__private__","pdfVersion","getPdfVersion","setPdfVersion","value","ApiMode","COMPAT","ADVANCED","apiMode","isAdvancedAPI","roundToPrecision","number","parmPrecision","tmpPrecision","isNaN","toFixed","replace","hpf","scale","scaleFactor","fileId","getFileId","setFileId","test","toUpperCase","split","map","charAt","floor","join","creationDate","convertDateToPDFDate","parmDate","result","tzoffset","getTimezoneOffset","tzsign","tzhour","tzmin","timeZoneString","padd2","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","convertPDFDateToDate","parmPDFDate","year","parseInt","substr","month","date","hour","minutes","seconds","resultingDate","Date","setCreationDate","tmpCreationDateString","regexPDFCreationDate","getCreationDate","type","objectNumber","offsets","content","contentLength","additionalObjects","pages","currentPage","outputDestination","resetDocument","rootDictionaryObjId","newObjectDeferred","resourceDictionaryObjId","setOutputDestination","destination","out","string","write","getArrayBuffer","data","len","ab","ArrayBuffer","u8","Uint8Array","charCodeAt","pageMode","getPageMode","layoutMode","getLayoutMode","documentProperties","title","subject","author","keywords","creator","fonts","activeFontKey","page","pagesContext","events","hotfixes","renderTargets","matrixMult","m1","m2","multiply","newObject","oid","newObjectDeferredBegin","doOutput","newAdditionalObject","objId","obj","getFilters","putStream","alreadyAppliedFilters","addLength1","valueOfLength1","processedData","keyValues","additionalKeyValues","processDataByFilters","reverseChain","filterAsString","isArray","key","j","decodeParmsArray","i","k","putPage","pageNumber","pageObjectNumber","pageContentsObjId","contentsObjId","parseFloat","mediaBox","bottomLeftX","bottomLeftY","topRightX","topRightY","cropBox","bleedBox","trimBox","artBox","pageContext","pageContent","objectId","putPages","n","pageObjectNumbers","kids","putXobjectDict","xObjectKey","putResourceDictionary","objectIds","resourcesOid","putResources","deferredResourceDictionaryIds","objectOid","Number","MAX_SAFE_INTEGER","SAFE","__safeCall","fn","foo","__safeCallWrapper","e","stack","indexOf","m","alert","bar","to8bitStream","text","flags","l","sourceEncoding","encodingBlock","outputEncoding","newtext","isUnicode","ch","bch","autoencode","metadata","encoding","codePages","String","fromCharCode","undefined","noBOM","pdfEscape","beginPage","_setPage","_addPage","parmFormat","width","height","min","getNumberOfPages","putInfo","version","putCatalog","tmpRootDictionaryObjId","putTrailer","putHeader","putXRef","p","offset","buildDocument","offsetOfXRef","output","filename","dataURI","pdfDocument","unescape","encodeURIComponent","hasHotfix","hotfixName","addPage","isValidStyle","style","validStyleVariants","close","getHorizontalCoordinate","getVerticalCoordinate","pageHeight","getHorizontalCoordinateString","getVerticalCoordinateString","plugin","newEvents","eventname","handler_and_args","concat","getCoordinateString","collections","getPDFVersion","jsPDFAPI","namespace","__addimage__","ARRAY_APPLY_BATCH","putImage","image","filter","splice","colorSpace","color_spaces","INDEXED","palette","sMask","DEVICE_CMYK","bitsPerComponent","decodeParameters","transparency","predictor","arrayBufferToBinaryString","putResourcesCallback","images","putXObjectsDictCallback","index","checkCompressValue","image_compression","NONE","initialize","getImages","getImageIndex","notDefined","generateAliasFromImageData","imageData","isArrayBufferView","sHashCode","isImageTypeSupported","checkImagesForAlias","alias","determineWidthAndHeight","writeImageToPDF","x","y","rotation","dims","coord","vcoord","PI","c","cos","s","sin","f4","rotationTransformationMatrix","DEVICE_RGB","DEVICE_GRAY","CAL_GREY","CAL_RGB","LAB","ICC_BASED","PATTERN","SEPARATION","DEVICE_N","decode","DCT_DECODE","FLATE_DECODE","LZW_DECODE","JPX_DECODE","JBIG2_DECODE","ASCII85_DECODE","ASCII_HEX_DECODE","RUN_LENGTH_DECODE","CCITT_FAX_DECODE","FAST","MEDIUM","SLOW","hash","byteLength","validateStringAsBase64","possibleBase64String","trim","extractImageFromDataUrl","dataUrl","dataUrlParts","extractedInfo","exec","mimeType","charset","supportsArrayBuffer","isArrayBuffer","object","Uint32Array","Int8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Float32Array","Float64Array","binaryStringToUint8Array","binary_string","bytes","buffer","buf","subarray","addImage","w","h","compression","processImageData","dataAsBinaryString","tmpImageData","convertBase64ToBinaryString","stringData","throwError","base64Info","rawData","getImageProperties","fileType","Worker","require","u16","u32","fleb","fdeb","clim","freb","eb","start","b","r","_a","fl","revfl","_b","fd","rev","hMap","cd","mb","le","co","rvb","sv","r_1","v","flt","fdt","flrm","fdrm","max","a","bits","d","o","bits16","shft","slc","set","inflt","dat","st","sl","noBuf","noSt","cbuf","bl","nbuf","final","f","pos","bt","lm","dm","lbt","dbt","tbts","t","hLit","hcLen","tl","ldt","clt","clb","clbmsk","clm","lt","dt","lms","dms","mxa","sym","add","dsym","end","zlv","unzlibSync","PNG","APNG_BLEND_OP_SOURCE","APNG_DISPOSE_OP_BACKGROUND","APNG_DISPOSE_OP_PREVIOUS","makeImage","scratchCanvas","scratchCtx","chunkSize","colors","palLen","delayDen","delayNum","frame","section","palShort","_i","_j","_ref","imgData","animation","readUInt32","_results","colorType","compressionMethod","filterMethod","interlaceMethod","numFrames","numPlays","Infinity","frames","read","xOffset","yOffset","readUInt16","delay","disposeOp","blendOp","indexed","grayscale","rgb","hasAlphaChannel","pixelBitlength","b1","b2","b3","b4","decodePixels","pixelBytes","fullPixels","_this","pass","x0","y0","dx","dy","abyte","col","left","pa","paeth","pb","pc","pixels","row","scanlineLength","upper","upperLeft","_k","_l","_m","ceil","isFull","fullPos","partPos","decodePalette","ret","_ref1","copyToImageData","alpha","input","_decodedPalette","hasBrowserCanvas","document","createElement","getContext","img","clearRect","putImageData","Image","src","toDataURL","decodeFrames","ctx","_len","createImageData","renderFrame","prev","drawImage","animate","doFrame","frameNumber","_timeout","setTimeout","stopAnimation","clearTimeout","render","canvas","_png","canCompress","hasCompressionJS","zlibSync","compressBytes","lineLength","colorsPerPixel","level","filter_method","filterUp","filterSub","filterAverage","filterPaeth","applyPngFilterMethod","lines","filter_methods","getFilterMethods","line","prevLine","results","ind","getIndexOfSmallestSum","filterNone","unshift","up","upLeft","paethPredictor","pLeft","pUp","pUpLeft","arrays","sum","reduce","pv","cv","getPredictorFromCompression","processPNG","trns","pal","smask","alphaData","hasColors","pixel","pDiff","pbl","trans","total","png2pdf","config","doc","pageWidth","iLen","pLen"],"mappings":"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"}